(()=>{"use strict";var e={886:(e,t,o)=>{var l=o(963),i=o(252);function n(e,t,o,l,n,r){const a=(0,i.up)("router-view");return(0,i.wg)(),(0,i.j4)(a)}const r={name:"App",mounted(){this.$store.dispatch("initializeData")}};var a=o(744);const s=(0,a.Z)(r,[["render",n]]),d=s;var c=o(201),u=o(577);function p(e,t,o,l,n,r){const a=(0,i.up)("BurgerNav"),s=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",{id:"public",style:(0,u.j5)({backgroundColor:e.publicStyle.backgroundColor})},[(0,i.Wm)(a),(0,i.Wm)(s)],4)}function h(e,t,o,n,r,a){return(0,i.wg)(),(0,i.iD)("div",{class:"round-div",ref:"roundDiv",onMousedown:t[0]||(t[0]=(0,l.iM)(((...e)=>a.startDrag&&a.startDrag(...e)),["stop","prevent"])),onMouseup:t[1]||(t[1]=(0,l.iM)(((...e)=>a.endDrag&&a.endDrag(...e)),["stop","prevent"])),onTouchstart:t[2]||(t[2]=(0,l.iM)(((...e)=>a.startDragTouch&&a.startDragTouch(...e)),["stop","prevent"])),onTouchmove:t[3]||(t[3]=(0,l.iM)(((...e)=>a.doDragTouch&&a.doDragTouch(...e)),["stop","prevent"])),onTouchend:t[4]||(t[4]=(0,l.iM)(((...e)=>a.endDrag&&a.endDrag(...e)),["stop","prevent"]))},null,544)}const m=o.p+"img/logo.fcaff911.svg",g={class:"navBar"},_={class:"navUl"},y={class:"ul-link"};function f(e,t,o,n,r,a){const s=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",{class:"move",ref:"roundDiv",onMousedown:t[0]||(t[0]=(0,l.iM)(((...e)=>a.startDrag&&a.startDrag(...e)),["prevent","stop"])),onTouchstart:t[1]||(t[1]=(0,l.iM)(((...e)=>a.startDragTouch&&a.startDragTouch(...e)),["prevent"])),onTouchmove:t[2]||(t[2]=(0,l.iM)(((...e)=>a.doDragTouch&&a.doDragTouch(...e)),["prevent"])),onTouchend:t[3]||(t[3]=(...e)=>a.endDragTouch&&a.endDragTouch(...e))},[(0,i._)("span",{class:(0,u.C_)(["menu",{shadowMenu:r.menuIsActive}])},[(0,i._)("span",{class:(0,u.C_)(["exit",{halbaxit:r.menuIsActive}])},null,2),(0,i._)("img",{class:(0,u.C_)(["logo",{halba:r.menuIsActive}]),src:m},null,2)],2)],544),(0,i._)("div",g,[(0,i.wy)((0,i._)("ul",_,[(0,i._)("li",null,[(0,i.Wm)(s,{class:"navBarLink",to:"/"},{default:(0,i.w5)((()=>[(0,i.Uk)("Home")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{class:"navBarLink",to:"/menu"},{default:(0,i.w5)((()=>[(0,i.Uk)("CARTE")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{class:"navBarLink",to:"/admin/dashboard"},{default:(0,i.w5)((()=>[(0,i.Uk)("Admin")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{class:"navBarLink",to:"/"},{default:(0,i.w5)((()=>[(0,i.Uk)("Home")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{class:"navBarLink",to:"/menu"},{default:(0,i.w5)((()=>[(0,i.Uk)("CARTE")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{class:"navBarLink",to:"/admin/dashboard"},{default:(0,i.w5)((()=>[(0,i.Uk)("Admin")])),_:1})])],512),[[l.F8,!r.menuIsActive]])]),(0,i._)("div",{onClick:t[4]||(t[4]=(...e)=>a.navigation&&a.navigation(...e)),onWheel:t[5]||(t[5]=(0,l.iM)((()=>{}),["prevent"])),onTouchmove:t[6]||(t[6]=(0,l.iM)((()=>{}),["prevent"])),onScroll:t[7]||(t[7]=(0,l.iM)((()=>{}),["prevent"])),class:(0,u.C_)([{showNavLink:r.menuIsActive},"navLink"])},[(0,i._)("ul",y,[(0,i._)("li",null,[(0,i.Wm)(s,{class:"link",to:"/"},{default:(0,i.w5)((()=>[(0,i.Uk)("Home")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{class:"link",to:"/menu"},{default:(0,i.w5)((()=>[(0,i.Uk)("LA CARTE")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{class:"link",to:"/admin/dashboard"},{default:(0,i.w5)((()=>[(0,i.Uk)("Admin")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{class:"link",to:"/login"},{default:(0,i.w5)((()=>[(0,i.Uk)("Login")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{class:"link",to:"/signup"},{default:(0,i.w5)((()=>[(0,i.Uk)("Signup")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{class:"link",to:"/about"},{default:(0,i.w5)((()=>[(0,i.Uk)("About")])),_:1})])])],34)],64)}const v={name:"newdeliceNav",data(){return{menuIsActive:!1,isDragging:!1,currentX:0,currentY:0,initialX:0,initialY:0,xOffset:0,yOffset:0}},computed:{},methods:{navigation(){this.menuIsActive=!1},startDrag(e){this.xDetectClick=e.clientX,this.yDetectClick=e.clientY,this.initialX=e.clientX-this.xOffset,this.initialY=e.clientY-this.yOffset,e.target===this.$refs.roundDiv&&(this.isDragging=!0,document.addEventListener("mousemove",this.doDrag),document.addEventListener("mouseup",this.endDrag))},startDragTouch(e){this.xDetectTouch=e.touches[0].clientX,this.yDetectTouch=e.touches[0].clientY,this.initialX=e.touches[0].clientX-this.xOffset,this.initialY=e.touches[0].clientY-this.yOffset,e.target===this.$refs.roundDiv&&(this.isDragging=!0,document.addEventListener("touchmove",this.doDragTouch),document.addEventListener("touchend",this.endDragTouch))},doDrag(e){this.isDragging&&(this.currentX=e.clientX-this.initialX,this.currentY=e.clientY-this.initialY,this.xOffset=this.currentX,this.yOffset=this.currentY,this.setTranslate(this.currentX,this.currentY,this.$refs.roundDiv))},doDragTouch(e){this.isDragging&&(this.currentX=e.touches[0].clientX-this.initialX,this.currentY=e.touches[0].clientY-this.initialY,this.xOffset=this.currentX,this.yOffset=this.currentY,this.setTranslate(this.currentX,this.currentY,this.$refs.roundDiv))},endDrag(e){this.isDragging=!1,this.xDetectClick===e.clientX&&this.yDetectClick===e.clientY&&(this.menuIsActive=!this.menuIsActive),this.initialX=e.clientX-this.xOffset,this.initialY=e.clientY-this.yOffset,document.removeEventListener("mousemove",this.doDrag),document.removeEventListener("mouseup",this.endDrag)},endDragTouch(e){this.isDragging=!1,this.xDetectTouch===e.changedTouches[0].clientX&&this.yDetectTouch===e.changedTouches[0].clientY&&(this.menuIsActive=!this.menuIsActive),this.initialX=e.changedTouches[0].clientX,this.initialY=e.changedTouches[0].clientY,document.removeEventListener("touchmove",this.doDragTouch),document.removeEventListener("touchend",this.endDragTouch)},setTranslate(e,t,o){o.style.transform=`translate3d(${e}px, ${t}px, 0)`}}},w=(0,a.Z)(v,[["render",f],["__scopeId","data-v-13ed7e70"]]),b=w,C={name:"RoundDiv",components:{newdeliceNav:b},data(){return{isDragging:!1,currentX:0,currentY:0,initialX:0,initialY:0,xOffset:0,yOffset:0}},methods:{startDrag(e){this.initialX=e.clientX-this.xOffset,this.initialY=e.clientY-this.yOffset,e.target===this.$refs.roundDiv&&(this.isDragging=!0,document.addEventListener("mousemove",this.doDrag))},startDragTouch(e){this.initialX=e.touches[0].clientX-this.xOffset,this.initialY=e.touches[0].clientY-this.yOffset,e.target===this.$refs.roundDiv&&(this.isDragging=!0)},doDrag(e){this.isDragging&&(e.preventDefault(),this.currentX=e.clientX-this.initialX,this.currentY=e.clientY-this.initialY,this.xOffset=this.currentX,this.yOffset=this.currentY,this.setTranslate(this.currentX,this.currentY,this.$refs.roundDiv))},doDragTouch(e){this.isDragging&&(e.preventDefault(),this.currentX=e.touches[0].clientX-this.initialX,this.currentY=e.touches[0].clientY-this.initialY,this.xOffset=this.currentX,this.yOffset=this.currentY,this.setTranslate(this.currentX,this.currentY,this.$refs.roundDiv))},endDrag(){this.initialX=this.currentX,this.initialY=this.currentY,this.isDragging=!1,document.removeEventListener("mousemove",this.doDrag)},setTranslate(e,t,o){o.style.transform=`translate3d(${e}px, ${t}px, 0)`}}},k=(0,a.Z)(C,[["render",h]]),P=k,D=e=>((0,i.dD)("data-v-22f356cd"),e=e(),(0,i.Cn)(),e),U={class:"navbar"},x={class:"dropdown"},M=D((()=>(0,i._)("a",{class:"link",href:""},"ADMIN",-1))),E={class:"dropdown-content"};function I(e,t,o,l,n,r){const a=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("nav",U,[(0,i._)("ul",null,[(0,i._)("li",null,[(0,i.Wm)(a,{class:"link",to:"/"},{default:(0,i.w5)((()=>[(0,i.Uk)("Home")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(a,{class:"link",to:"/menu"},{default:(0,i.w5)((()=>[(0,i.Uk)("LA CARTE")])),_:1})]),(0,i._)("li",x,[M,(0,i._)("div",E,[(0,i.Wm)(a,{class:"dropdown-link",to:"/admin/dashboard"},{default:(0,i.w5)((()=>[(0,i.Uk)("Admin")])),_:1}),(0,i.Wm)(a,{class:"dropdown-link",to:"/login"},{default:(0,i.w5)((()=>[(0,i.Uk)("Login")])),_:1}),(0,i.Wm)(a,{class:"dropdown-link",to:"/signup"},{default:(0,i.w5)((()=>[(0,i.Uk)("Signup")])),_:1})])]),(0,i._)("li",null,[(0,i.Wm)(a,{class:"link",to:"/about"},{default:(0,i.w5)((()=>[(0,i.Uk)("About")])),_:1})])])])}const T={name:"PublicNav"},S=(0,a.Z)(T,[["render",I],["__scopeId","data-v-22f356cd"]]),F=S,A={class:"navMobile"};function O(e,t,o,l,n,r){const a=(0,i.up)("BurgerNav");return(0,i.wg)(),(0,i.iD)("nav",A,[(0,i.Wm)(a)])}const L=o.p+"img/logo.f839fd85.png",W={class:"navBar"},q={class:"navUl"},N={class:"menu"},H={class:"ul-link"};function Y(e,t,o,n,r,a){const s=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",W,[(0,i.wy)((0,i._)("ul",q,[(0,i._)("li",null,[(0,i.Wm)(s,{class:"navBarLink",to:"/"},{default:(0,i.w5)((()=>[(0,i.Uk)("Home")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{class:"navBarLink",to:"/menu"},{default:(0,i.w5)((()=>[(0,i.Uk)("CARTE")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{class:"navBarLink",to:"/admin/dashboard"},{default:(0,i.w5)((()=>[(0,i.Uk)("Admin")])),_:1})])],512),[[l.F8,!r.menuIsActive]])]),(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>r.menuIsActive=e)},null,512),[[l.e8,r.menuIsActive]]),(0,i._)("span",N,[(0,i._)("span",{class:(0,u.C_)(["exit",{halbaxit:r.menuIsActive}])},null,2),(0,i._)("img",{class:(0,u.C_)(["logo",{halba:r.menuIsActive}]),src:L},null,2)])]),(0,i._)("div",{onClick:t[1]||(t[1]=(...e)=>a.navigation&&a.navigation(...e)),onWheel:t[2]||(t[2]=(0,l.iM)((()=>{}),["prevent"])),onTouchmove:t[3]||(t[3]=(0,l.iM)((()=>{}),["prevent"])),onScroll:t[4]||(t[4]=(0,l.iM)((()=>{}),["prevent"])),class:(0,u.C_)([{showNavLink:r.menuIsActive},"navLink"])},[(0,i._)("ul",H,[(0,i._)("li",null,[(0,i.Wm)(s,{class:"link",to:"/"},{default:(0,i.w5)((()=>[(0,i.Uk)("Home")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{class:"link",to:"/menu"},{default:(0,i.w5)((()=>[(0,i.Uk)("LA CARTE")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{class:"link",to:"/admin/dashboard"},{default:(0,i.w5)((()=>[(0,i.Uk)("Admin")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{class:"link",to:"/login"},{default:(0,i.w5)((()=>[(0,i.Uk)("Login")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{class:"link",to:"/signup"},{default:(0,i.w5)((()=>[(0,i.Uk)("Signup")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{class:"link",to:"/about"},{default:(0,i.w5)((()=>[(0,i.Uk)("About")])),_:1})])])],34)],64)}const R={name:"BurgerNav",data(){return{menuIsActive:!1}},methods:{navigation(){this.menuIsActive=!1}}},V=(0,a.Z)(R,[["render",Y],["__scopeId","data-v-a946d19e"]]),z=V,$={name:"NavMobile",components:{BurgerNav:z}},X=(0,a.Z)($,[["render",O],["__scopeId","data-v-2f1f3c34"]]),B=X;var j=o(907);const Z={name:"PublicLayout",components:{PublicNav:F,NavMobile:B,BurgerNav:z,testComponent:P},computed:{...(0,j.rn)(["publicStyle"])},methods:{}},G=(0,a.Z)(Z,[["render",p],["__scopeId","data-v-920f252c"]]),K=G,J={class:"about"},Q=(0,i._)("h1",null,"This is an about page",-1),ee=[Q];function te(e,t){return(0,i.wg)(),(0,i.iD)("div",J,ee)}const oe={},le=(0,a.Z)(oe,[["render",te]]),ie=le,ne=e=>((0,i.dD)("data-v-61409d01"),e=e(),(0,i.Cn)(),e),re=["src"],ae={class:"section-marketing"},se={class:"container-grid"},de={class:"banner-content"},ce={class:"picture"},ue=["src"],pe={class:"textWrap"},he={class:"cardText"},me={class:"card-title"},ge={class:"card-description"},_e=ne((()=>(0,i._)("button",{class:"btn"},"DECOUVRIR",-1)));function ye(e,t,o,l,n,r){const a=(0,i.up)("orderBtn");return(0,i.wg)(),(0,i.iD)("div",{class:"home",style:(0,u.j5)({backgroundColor:e.publicStyle.homeColor})},[(0,i._)("div",{class:"mainImage",style:(0,u.j5)({paddingBottom:n.paddingAdapted+"px"})},[n.hero?((0,i.wg)(),(0,i.iD)("img",{key:0,ref:"Hero",class:"bigImg",src:n.hero,alt:"image de couverture",onLoad:t[0]||(t[0]=(...e)=>r.onImageLoad&&r.onImageLoad(...e))},null,40,re)):(0,i.kq)("",!0)],4),(0,i.Wm)(a),(0,i._)("section",ae,[(0,i._)("div",se,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.home,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"banner",key:e._id},[(0,i._)("div",de,[(0,i._)("div",ce,[(0,i._)("img",{src:e.imgPost},null,8,ue)])]),(0,i._)("div",pe,[(0,i._)("div",he,[(0,i._)("div",me,(0,u.zw)(e.titlePost),1),(0,i._)("div",ge,(0,u.zw)(e.descriptionPost),1)]),_e])])))),128))])])],4)}var fe=o(154);let ve=e=>xe.post("api/auth/signup",e),we=e=>xe.post("api/auth/login",e),be=()=>{sessionStorage.removeItem("token")},Ce=e=>{sessionStorage.setItem("token",e)},ke=()=>sessionStorage.getItem("token"),Pe=()=>{let e=sessionStorage.getItem(e);return!!e};const De={signup:ve,login:we,logout:be,saveToken:Ce,getToken:ke,isLogged:Pe},Ue=fe.Z.create({baseURL:"http://localhost:3000/"});Ue.interceptors.request.use((e=>(De.isLogged&&(e.headers.Authorization="Bearer "+De.getToken()),e))),Ue.interceptors.response.use((e=>e),(e=>{401==e.response.status&&"Non autorisé"==e.response.message&&(De.logout(),Ya.push("/"))}));const xe=Ue;let Me=()=>xe.get("/api/content"),Ee=e=>xe.post("/api/content",e,{headers:{"Content-Type":"multipart/form-data"}}),Ie=(e,t)=>xe.patch("/api/content/"+e,t,{headers:{"Content-Type":"multipart/form-data"}}),Te=(e,t)=>xe.patch("/api/content/hero/"+e,t,{headers:{"Content-Type":"multipart/form-data"}}),Se=e=>xe.post("/api/content/hero",e,{headers:{"Content-Type":"multipart/form-data"}}),Fe=()=>xe.get("/api/content/hero"),Ae=()=>xe.get("/api/content/getStyle"),Oe=e=>xe.patch("/api/content/updateStyle",e);const Le={postContent:Ie,getContent:Me,createPost:Ee,postHero:Te,getHero:Fe,createHero:Se,getPublicStyle:Ae,updatePublicStyle:Oe};function We(e,t,o,l,n,r){return(0,i.wg)(),(0,i.iD)("button",{onClick:t[0]||(t[0]=e=>r.goToExternalLink(o.link)),class:"btnMobile"},"Commandez")}function qe(e){return e.startsWith("http://")?"https://"+e.substring(7):e.startsWith("https://")?e:"https://"+e}const Ne={name:"orderBtn",props:{link:String},methods:{goToExternalLink(e){window.open(qe(e),"_blank")}}},He=(0,a.Z)(Ne,[["render",We],["__scopeId","data-v-055814c4"]]),Ye=He,Re={name:"HomeView",components:{orderBtn:Ye},data(){return{home:{},contents:[],hero:"",paddingAdapted:0}},computed:{...(0,j.rn)(["publicStyle"])},mounted(){Le.getContent().then((e=>{this.home=e.data.home})).catch((e=>{console.log(e)})),Le.getHero().then((e=>{this.hero=e.data.hero[0].imgHero})).catch((e=>console.log(e)))},methods:{onImageLoad(){const e=this.$refs.Hero.offsetHeight;this.paddingAdapted=e}}},Ve=(0,a.Z)(Re,[["render",ye],["__scopeId","data-v-61409d01"]]),ze=Ve,$e=e=>((0,i.dD)("data-v-98ed3208"),e=e(),(0,i.Cn)(),e),Xe={class:"public"},Be={class:"public-content"},je={class:"section"},Ze=["onClick"],Ge={id:"sectionTacos",class:"menusection"},Ke=$e((()=>(0,i._)("h1",{class:"titlesection"},"PRODUITS",-1))),Je={class:"rayon",oncontextmenu:"return false;",onkeydown:"return false;",onmousedown:"return false;"},Qe={class:"pictureProduit"},et=["onClick"],tt=["src"],ot={key:0,class:"infos"},lt={class:"titleandinfo"},it={class:"titleproduit"},nt={class:"info"},rt={key:0,class:"prix"},at={key:1,class:"prix"},st={key:1,class:"infos"},dt=$e((()=>(0,i._)("p",{class:"titleproduit"},"indisponible",-1))),ct=[dt];function ut(e,t,o,n,r,a){return(0,i.wg)(),(0,i.iD)("div",Xe,[(0,i._)("div",Be,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.searchKey=e),type:"search",id:"search",placeholder:"rechercher...",autocomplete:"off"},null,512),[[l.nr,r.searchKey]]),(0,i._)("div",je,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.categories,(e=>((0,i.wg)(),(0,i.iD)("label",{class:"switch",key:e},[(0,i._)("input",{type:"checkbox",onClick:t=>a.toggleCategory(e)},null,8,Ze),(0,i._)("span",null,(0,u.zw)(e),1)])))),128))]),(0,i._)("section",Ge,[Ke,(0,i._)("div",Je,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.filteredProducts,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:"produit",key:e},[(0,i._)("div",Qe,[e.prixMenu?((0,i.wg)(),(0,i.iD)("img",{key:0,src:"menu.svg",onClick:e=>a.toggleMenu(t),class:(0,u.C_)({iconMenu:!0,iconMenuOff:!r.products[t].Menu})},null,10,et)):(0,i.kq)("",!0),(0,i._)("img",{src:e.imageUrl,alt:"une photo du Tacos M",class:"imgproduit"},null,8,tt),(0,i._)("img",{src:"boisson.png",class:(0,u.C_)({boisson:!0,boissonOut:!r.products[t].Menu})},null,2),(0,i._)("img",{src:"frite.png",class:(0,u.C_)({frite:!0,friteOut:!r.products[t].Menu})},null,2)]),e.available?((0,i.wg)(),(0,i.iD)("div",ot,[(0,i._)("div",lt,[(0,i._)("h2",it,(0,u.zw)(e.nameProduct),1),(0,i._)("h3",nt,(0,u.zw)(e.descriptionProduct),1)]),r.products[t].Menu&&r.products[t].prixMenu?((0,i.wg)(),(0,i.iD)("p",rt,(0,u.zw)(e.prixMenu.toLocaleString("fr-FR",{style:"currency",currency:"EUR"})),1)):((0,i.wg)(),(0,i.iD)("p",at,(0,u.zw)(e.prixProduct.toLocaleString("fr-FR",{style:"currency",currency:"EUR"})),1))])):((0,i.wg)(),(0,i.iD)("div",st,ct))])))),128))])])])])}let pt=()=>xe.get("/api/products/categories"),ht=e=>xe.post("/api/products/categories",e),mt=e=>(console.log(e),xe.put("/api/products/updateCategoriesOrder",e)),gt=(e,t)=>xe.put("/api/products/order/"+e,t),_t=(e,t)=>xe.put("/api/products/categories/"+e,t,{headers:{"Content-Type":"multipart/form-data"}}),yt=e=>xe["delete"]("/api/products/categories/"+e),ft=(e,t)=>xe.post("/api/products/addToCategory/"+e,t),vt=e=>xe.post("/api/products/options",e),wt=e=>xe["delete"]("/api/products/options/"+e),bt=(e,t)=>xe.put("/api/products/options/"+e+"/options-order",t),Ct=()=>xe.get("/api/products"),kt=e=>xe.get("/api/products/"+e),Pt=(e,t)=>xe.patch("/api/products/"+e,t,{headers:{"Content-Type":"multipart/form-data"}}),Dt=e=>xe.post("/api/products/",e,{headers:{"Content-Type":"multipart/form-data"}}),Ut=e=>{xe.post("/api/products",e,{headers:{"Content-Type":"multipart/form-data"}})},xt=e=>xe["delete"]("/api/products/"+e);const Mt={deleteProduct:xt,createProduct:Dt,getAllProducts:Ct,getProduct:kt,updateProduct:Pt,uploadImg:Ut,addProductToCategory:ft,getAllCategories:pt,createCategory:ht,updateCategoryOrder:mt,updateProductOrder:gt,editCategory:_t,deleteCategory:yt,createOption:vt,deleteOption:wt,updateOptionsOrder:bt},Et={name:"Menu",data(){return{products:[],selectedCategories:[],categories:["BAGUETTE","burger","tacos","muffin","texmex","pizza","boisson"],searchKey:"",panier:[]}},computed:{filteredProducts(){let e=[];return e=0===this.selectedCategories.length?this.products:this.products.filter((e=>this.selectedCategories.includes(e.category))),e.filter((e=>e.nameProduct.toLowerCase().includes(this.searchKey.toLowerCase())))}},methods:{toggleCategory(e){const t=this.selectedCategories.indexOf(e);-1===t?this.selectedCategories.push(e):this.selectedCategories.splice(t,1)},toggleMenu(e){this.products[e].Menu=!this.products[e].Menu}},mounted(){Mt.getAllProducts().then((e=>{const t=e.data.Allproduct,o=t.map((e=>e.hasOwnProperty("prixMenu")?{...e,Menu:!0}:e));this.products=o,console.log(this.products)})).catch((e=>{console.log(e)}))}},It=(0,a.Z)(Et,[["render",ut],["__scopeId","data-v-98ed3208"]]),Tt=It,St={class:"admin"};function Ft(e,t,o,l,n,r){const a=(0,i.up)("burgerNavAdmin"),s=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",{style:(0,u.j5)({backgroundColor:e.publicStyle.backgroundColor}),class:"layout"},[(0,i.Wm)(a),(0,i._)("div",St,[(0,i.Wm)(s)])],4)}const At=(0,i._)("header",null," header",-1);function Ot(e,t,o,l,n,r){const a=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[At,(0,i.Wm)(a,{to:"/admin/user/index"},{default:(0,i.w5)((()=>[(0,i.Uk)("Users")])),_:1}),(0,i.Uk)(" / "),(0,i.Wm)(a,{to:"/admin/products/index"},{default:(0,i.w5)((()=>[(0,i.Uk)("products")])),_:1}),(0,i.Uk)(" / "),(0,i.Wm)(a,{to:"/admin/content"},{default:(0,i.w5)((()=>[(0,i.Uk)("content")])),_:1}),(0,i.Uk)(" / "),(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>r.logout&&r.logout(...e)),class:"btn"},"Deconnexion")])}let Lt=()=>xe.get("/api/users"),Wt=e=>xe.get("/api/users/"+e),qt=(e,t)=>xe.patch("/api/users/"+e,t),Nt=e=>xe.post("/api/users/",e),Ht=e=>xe["delete"]("/api/users/"+e);const Yt={deleteUser:Ht,createUser:Nt,getAllUsers:Lt,getUser:Wt,updateUser:qt},Rt={name:"AdminNav",methods:{logout(){De.logout(),this.$router.push("/")}}},Vt=(0,a.Z)(Rt,[["render",Ot]]),zt=Vt,$t={class:"navBar"},Xt={class:"navUl"},Bt={class:"menu"},jt={class:"ul-link"};function Zt(e,t,o,n,r,a){const s=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",$t,[(0,i.wy)((0,i._)("ul",Xt,[(0,i._)("li",null,[(0,i.Wm)(s,{class:"navBarLink",to:"/admin/user/index"},{default:(0,i.w5)((()=>[(0,i.Uk)("UTILISATEURS")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{class:"navBarLink",to:"/admin/products/index"},{default:(0,i.w5)((()=>[(0,i.Uk)("PRODUITS")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{class:"navBarLink",to:"/admin/content"},{default:(0,i.w5)((()=>[(0,i.Uk)("MARKETING")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{class:"navBarLink",to:"/admin/client"},{default:(0,i.w5)((()=>[(0,i.Uk)("Clients")])),_:1})])],512),[[l.F8,!r.menuIsActive]])]),(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>r.menuIsActive=e)},null,512),[[l.e8,r.menuIsActive]]),(0,i._)("span",Bt,[(0,i._)("span",{class:(0,u.C_)(["exit",{halbaxit:r.menuIsActive}])},null,2),(0,i._)("img",{class:(0,u.C_)(["logo",{halba:r.menuIsActive}]),src:L},null,2)])]),(0,i._)("div",{onClick:t[1]||(t[1]=(...e)=>a.navigation&&a.navigation(...e)),onWheel:t[2]||(t[2]=(0,l.iM)((()=>{}),["prevent"])),onTouchmove:t[3]||(t[3]=(0,l.iM)((()=>{}),["prevent"])),onScroll:t[4]||(t[4]=(0,l.iM)((()=>{}),["prevent"])),class:(0,u.C_)([{showNavLink:r.menuIsActive},"navLink"])},[(0,i._)("ul",jt,[(0,i._)("li",null,[(0,i.Wm)(s,{to:"/"},{default:(0,i.w5)((()=>[(0,i.Uk)("Home")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{to:"/menu"},{default:(0,i.w5)((()=>[(0,i.Uk)("CARTE")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{to:"/admin/dashboard"},{default:(0,i.w5)((()=>[(0,i.Uk)("Admin")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{to:"/"},{default:(0,i.w5)((()=>[(0,i.Uk)("Home")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{to:"/menu"},{default:(0,i.w5)((()=>[(0,i.Uk)("CARTE")])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(s,{to:"/admin/dashboard"},{default:(0,i.w5)((()=>[(0,i.Uk)("Admin")])),_:1})])])],34)],64)}const Gt={name:"BurgerNav",data(){return{menuIsActive:!1}},computed:{},methods:{navigation(){this.menuIsActive=!1}}},Kt=(0,a.Z)(Gt,[["render",Zt],["__scopeId","data-v-65a36abe"]]),Jt=Kt,Qt={name:"PublicLayout",components:{PublicNav:F,AdminNav:zt,burgerNavAdmin:Jt},computed:{...(0,j.rn)(["publicStyle"])}},eo=(0,a.Z)(Qt,[["render",Ft]]),to=eo,oo={class:"admin"};function lo(e,t,o,l,n,r){const a=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",oo,[(0,i.Uk)("Dashboard Layout "),(0,i.Wm)(a)])}const io={name:"Dashboard"},no=(0,a.Z)(io,[["render",lo]]),ro=no,ao=e=>((0,i.dD)("data-v-7b2db2b6"),e=e(),(0,i.Cn)(),e),so={class:"admin-content"},co=ao((()=>(0,i._)("h2",null,"Liste des Utilisateurs",-1))),uo={class:"content-wrap"},po={class:"btn"},ho=ao((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"email"),(0,i._)("th",null,"Tel"),(0,i._)("th")])],-1))),mo=["onClick"],go=["onClick"];function _o(e,t,o,l,n,r){const a=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",so,[co,(0,i._)("div",uo,[(0,i._)("button",po,[(0,i.Wm)(a,{class:"link",to:"/admin/user/add"},{default:(0,i.w5)((()=>[(0,i.Uk)("AJOUTER UN UTILISATEUR")])),_:1})])]),(0,i._)("div",null,[(0,i._)("table",null,[ho,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.users,((e,t)=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id},[(0,i._)("td",null,(0,u.zw)(e.email),1),(0,i._)("td",null,(0,u.zw)(e.phone),1),(0,i._)("td",null,[(0,i._)("button",{onClick:t=>r.goEditUser(e._id),class:"btn"},"Modifier",8,mo),e._id!==n.adminId?((0,i.wg)(),(0,i.iD)("button",{key:0,onClick:o=>r.goDeleteUser(e._id,t),class:"btn delete"},"Supprimer",8,go)):(0,i.kq)("",!0)])])))),128))])])])])}const yo={name:"userIndex",data(){return{userLogged:"",users:[],adminId:"6409c0663d01483e0549bb2c"}},methods:{goEditUser(e){this.$router.push({name:"userEdit",params:{id:e}})},goDeleteUser(e,t){Yt.deleteUser(e).then((e=>{this.users.splice(t,1)})).catch((e=>console.log(e)))}},mounted(){Yt.getAllUsers().then((e=>{this.users=e.data.users,console.log(this.users)})).catch((e=>{console.log(e),this.$router.push("/login")}))}},fo=(0,a.Z)(yo,[["render",_o],["__scopeId","data-v-7b2db2b6"]]),vo=fo,wo={class:"admin"},bo=(0,i._)("h2",null,"Edition Utilisateur",-1),Co=(0,i._)("label",{for:"userName"},"ID",-1),ko=(0,i._)("label",{for:"userSurname"},"ID",-1),Po=(0,i._)("label",{for:"userPhone"},"Tel",-1),Do=(0,i._)("label",{for:"userEmail"},"Email",-1),Uo=(0,i._)("button",{type:"submit",class:"btn"},"Modifier",-1);function xo(e,t,o,n,r,a){return(0,i.wg)(),(0,i.iD)("div",wo,[(0,i.Uk)((0,u.zw)(r.user.userName)+" "+(0,u.zw)(o.id)+" ",1),bo,(0,i._)("form",{onSubmit:t[4]||(t[4]=(0,l.iM)((e=>a.editUser()),["prevent"]))},[Co,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>r.user.name=e),required:""},null,512),[[l.nr,r.user.name]]),ko,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>r.user.surname=e),required:""},null,512),[[l.nr,r.user.surname]]),Po,(0,i.wy)((0,i._)("input",{type:"tel",maxlength:"10",Pattern:"^0[0-9]{9}$",class:"field-long","onUpdate:modelValue":t[2]||(t[2]=e=>r.user.phone=e),required:""},null,512),[[l.nr,r.user.phone]]),Do,(0,i.wy)((0,i._)("input",{type:"email","onUpdate:modelValue":t[3]||(t[3]=e=>r.user.email=e),required:""},null,512),[[l.nr,r.user.email]]),Uo],32)])}const Mo={name:"userEdit",props:["id"],data(){return{user:{}}},methods:{editUser(){Yt.updateUser(this.id,this.user).then((e=>{1==e.data.modif.acknowledged&&1==e.data.modif.matchedCount&&0==e.data.modif.modifiedCount?(console.log(e.data),console.log("aucune modif")):this.$router.push({name:"userIndex"})})).catch((e=>console.log(e)))}},mounted(){Yt.getUser(this.id).then((e=>{this.user=e.data.User})).catch((e=>console.log(e)))}},Eo=(0,a.Z)(Mo,[["render",xo]]),Io=Eo,To=e=>((0,i.dD)("data-v-31a2e6a0"),e=e(),(0,i.Cn)(),e),So={class:"admin"},Fo={class:"form-style-1"},Ao={key:0},Oo=To((()=>(0,i._)("b",null,"Corriger les erreurs suivantes",-1))),Lo=To((()=>(0,i._)("label",null,"IDENTITE",-1))),Wo=To((()=>(0,i._)("label",null,"EMAIL",-1))),qo=To((()=>(0,i._)("label",null,"ROLE",-1))),No=To((()=>(0,i._)("option",{value:"Manager"},"Manager",-1))),Ho=To((()=>(0,i._)("option",{value:"Cuisto"},"Cuisto",-1))),Yo=To((()=>(0,i._)("option",{value:"Caissier"},"Caissier",-1))),Ro=To((()=>(0,i._)("option",{value:"Livreur"},"Livreur",-1))),Vo=[No,Ho,Yo,Ro],zo=To((()=>(0,i._)("label",{for:"phone"},"TELEPHONE",-1))),$o=To((()=>(0,i._)("label",{for:"userPassword"},"mot de passe",-1))),Xo=To((()=>(0,i._)("li",null,[(0,i._)("button",{type:"submit",class:"btn"},"CREER")],-1)));function Bo(e,t,o,n,r,a){return(0,i.wg)(),(0,i.iD)("div",So,[(0,i._)("form",{onSubmit:t[7]||(t[7]=(0,l.iM)((e=>a.addUser()),["prevent"]))},[(0,i._)("ul",Fo,[r.errors.length?((0,i.wg)(),(0,i.iD)("p",Ao,[Oo,(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.errors,(e=>((0,i.wg)(),(0,i.iD)("li",null,(0,u.zw)(e),1)))),256))])])):(0,i.kq)("",!0),(0,i._)("li",null,[Lo,(0,i.wy)((0,i._)("input",{type:"text",name:"field1",class:"field-divided",placeholder:"Nom","onUpdate:modelValue":t[0]||(t[0]=e=>r.user.name=e),required:""},null,512),[[l.nr,r.user.name]]),(0,i.Uk)(),(0,i.wy)((0,i._)("input",{type:"text",name:"field2",class:"field-divided",placeholder:"Prénom","onUpdate:modelValue":t[1]||(t[1]=e=>r.user.surname=e),required:""},null,512),[[l.nr,r.user.surname]])]),(0,i._)("li",null,[Wo,(0,i.wy)((0,i._)("input",{type:"email",name:"field3",class:"field-long",placeholder:"email@exemple.com","onUpdate:modelValue":t[2]||(t[2]=e=>r.user.email=e),required:""},null,512),[[l.nr,r.user.email]])]),(0,i._)("li",null,[qo,(0,i.wy)((0,i._)("select",{name:"field4",class:"field-select","onUpdate:modelValue":t[3]||(t[3]=e=>r.user.role=e),required:""},Vo,512),[[l.bM,r.user.role]])]),(0,i._)("li",null,[zo,(0,i.wy)((0,i._)("input",{type:"text",name:"field5",maxlength:"10",Pattern:"^0[0-9]{9}$",placeholder:"0607080910",class:"field-long","onUpdate:modelValue":t[4]||(t[4]=e=>r.user.phone=e),required:""},null,512),[[l.nr,r.user.phone]])]),(0,i._)("li",null,[$o,(0,i.wy)((0,i._)("input",{type:"password",name:"field6",placeholder:"Minimum 6 caractères",class:"field-long","onUpdate:modelValue":t[5]||(t[5]=e=>r.user.password=e),required:""},null,512),[[l.nr,r.user.password]])]),(0,i._)("li",null,[(0,i.wy)((0,i._)("input",{type:"password",name:"field7",placeholder:"Retapez le mot de passe",class:"field-long","onUpdate:modelValue":t[6]||(t[6]=e=>r.confirmPassword=e),required:""},null,512),[[l.nr,r.confirmPassword]])]),Xo,(0,i.Uk)(" "+(0,u.zw)(this.user.phone),1)])],32)])}const jo={name:"userAdd",data(){return{user:{name:"",surname:"",role:"",phone:"",email:"",password:""},confirmPassword:"",errors:[]}},methods:{addUser(){this.errors=[],this.user.password!=this.confirmPassword&&this.errors.push("le mot de passe doit correspondre"),this.user.password.length<6&&this.errors.push("le mot de passe doit contenir au moins 6 caractères"),0==this.errors.length&&Yt.createUser(this.user).then((e=>{console.log(e.data),this.$router.push({name:"userIndex"})})).catch((e=>console.log(e)))}}},Zo=(0,a.Z)(jo,[["render",Bo],["__scopeId","data-v-31a2e6a0"]]),Go=Zo,Ko=e=>((0,i.dD)("data-v-3cba6483"),e=e(),(0,i.Cn)(),e),Jo={class:"admin"},Qo={class:"admin-content"},el=Ko((()=>(0,i._)("h2",null,"Liste des Utilisateurs",-1))),tl={class:"content-wrap"},ol={class:"btn"},ll=Ko((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"ID"),(0,i._)("th",null,"Utilisateur"),(0,i._)("th",null,"Tel"),(0,i._)("th",null,"Role"),(0,i._)("th",null,"email"),(0,i._)("th",null,"OPTIONS")])],-1))),il=["onClick"],nl=["onClick"];function rl(e,t,o,l,n,r){const a=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",Jo,[(0,i._)("div",Qo,[el,(0,i._)("div",tl,[(0,i._)("button",ol,[(0,i.Wm)(a,{class:"link",to:"/admin/user/add"},{default:(0,i.w5)((()=>[(0,i.Uk)("AJOUTER UN UTILISATEUR")])),_:1})])]),(0,i._)("table",null,[ll,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.users,((e,t)=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id},[(0,i._)("td",null,(0,u.zw)("#"+t),1),(0,i._)("td",null,(0,u.zw)(e.name+e.surname),1),(0,i._)("td",null,(0,u.zw)(e.phone),1),(0,i._)("td",null,(0,u.zw)(e.role),1),(0,i._)("td",null,(0,u.zw)(e.email),1),(0,i._)("td",null,[(0,i._)("button",{onClick:t=>r.goEditUser(e._id),class:"btn"},"Modifier",8,il),e._id!==n.adminId?((0,i.wg)(),(0,i.iD)("button",{key:0,onClick:o=>r.goDeleteUser(e._id,t),class:"btn delete"},"Supprimer",8,nl)):(0,i.kq)("",!0)])])))),128))])])])])}const al={name:"userIndex",data(){return{userLogged:"",users:[],adminId:"6409c0663d01483e0549bb2c"}},methods:{goEditUser(e){this.$router.push({name:"userEdit",params:{id:e}})},goDeleteUser(e,t){Yt.deleteUser(e).then((e=>{this.users.splice(t,1)})).catch((e=>console.log(e)))}},mounted(){Yt.getAllUsers().then((e=>{this.users=e.data.users,console.log(this.users)})).catch((e=>{console.log(e),this.$router.push("/login")}))}},sl=(0,a.Z)(al,[["render",rl],["__scopeId","data-v-3cba6483"]]),dl=sl,cl=e=>((0,i.dD)("data-v-2168982f"),e=e(),(0,i.Cn)(),e),ul=cl((()=>(0,i._)("div",{class:"header-section"},[(0,i._)("h1",null,"Liste des Produits"),(0,i._)("h2",{style:{color:"var(--moduleColor)"}},"Assurez-vous que votre menu est correct")],-1))),pl={class:"content-wrap"},hl=cl((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"index"),(0,i._)("th",null,"NOM"),(0,i._)("th",null,"DESCRIPTION"),(0,i._)("th",null,"IMAGE"),(0,i._)("th",null,"PRIX"),(0,i._)("th",null,"DISPO"),(0,i._)("th",null,"OPTIONS")])],-1))),ml=["src"],gl={class:"caseBtn"},_l=["onClick"],yl=["onClick"];function fl(e,t,o,l,n,r){const a=(0,i.up)("categoryIndex");return(0,i.wg)(),(0,i.iD)(i.HY,null,[ul,(0,i.Wm)(a),(0,i._)("div",pl,[(0,i._)("table",null,[hl,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.products,((e,t)=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id},[(0,i._)("td",null,(0,u.zw)("#"+t),1),(0,i._)("td",null,(0,u.zw)(e.nameProduct),1),(0,i._)("td",null,(0,u.zw)(e.descriptionProduct),1),(0,i._)("td",null,[(0,i._)("img",{src:e.imageUrl,class:"vignette"},null,8,ml)]),(0,i._)("td",null,(0,u.zw)(e.prixProduct.toLocaleString("fr-FR",{style:"currency",currency:"EUR"})),1),(0,i._)("td",null,[(0,i._)("div",{class:(0,u.C_)(e.available?"circle green":"circle red")},null,2)]),(0,i._)("td",null,[(0,i._)("div",gl,[(0,i._)("button",{onClick:t=>r.goEditProduct(e._id),class:"btn"},"Modifier",8,_l),(0,i._)("button",{onClick:o=>r.goDeleteProduct(e._id,t),class:"btn delete"},"Supprimer",8,yl)])])])))),128))])])])],64)}const vl=e=>((0,i.dD)("data-v-50d5d21a"),e=e(),(0,i.Cn)(),e),wl={class:"headerCategory"},bl=vl((()=>(0,i._)("div",{class:"grabWrapper"},[(0,i._)("i",{class:"grab","aria-hidden":"true"},"drag_indicator")],-1))),Cl=["onClick"],kl={key:0,class:"categoryContent"},Pl={class:"actionDiv"},Dl=vl((()=>(0,i._)("div",{class:"grabWrapper"},[(0,i._)("i",{class:"grab","aria-hidden":"true"},"drag_indicator")],-1))),Ul={class:"pictureProduit"},xl=["src"],Ml=["onClick"],El={class:"titleandinfo"},Il={class:"titleproduit"},Tl=["onUpdate:modelValue","onChange"];function Sl(e,t,o,n,r,a){const s=(0,i.up)("CategoryCreationModal"),d=(0,i.up)("ProductEditModal"),c=(0,i.up)("CategoryEditModal"),p=(0,i.up)("ProductCreationModal"),h=(0,i.up)("draggable");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",null,[(0,i.Wm)(s,{onCategoryAdded:a.addNewCategory},null,8,["onCategoryAdded"]),(0,i._)("p",null,(0,u.zw)(r.message),1)]),(0,i._)("div",null,[(0,i.Wm)(d,{ref:"editModal",productEdit:r.productToEdit,onProductUpdated:a.updateProduct,onProductDeleted:a.handleProductDeleted},null,8,["productEdit","onProductUpdated","onProductDeleted"]),(0,i.Wm)(h,{list:r.categories,handle:".grabWrapper","ghost-class":"ghost","drag-class":"drag","item-key":"_id",onEnd:a.updateCategoryOrder},{item:(0,i.w5)((({element:e,index:o})=>[((0,i.wg)(),(0,i.iD)("div",{key:e._id,class:"category module"},[(0,i._)("div",wl,[bl,(0,i._)("h1",{class:"titleCategory",onClick:t=>a.toggleProducts(e._id)},(0,u.zw)(e.titleCategory),9,Cl),(0,i.Wm)(c,{ref:"editCategoryModal",categoryEdit:e,onCategoryUpdated:a.updateCategory,onCategoryDeleted:a.deleteCategory},null,8,["categoryEdit","onCategoryUpdated","onCategoryDeleted"])]),(0,i.wy)((0,i._)("h2",null,"cliquez pour voir "+(0,u.zw)(e.products.length)+" produits",513),[[l.F8,!r.showProducts[e._id]]]),r.showProducts[e._id]?((0,i.wg)(),(0,i.iD)("div",kl,[(0,i._)("div",Pl,[(0,i.Wm)(p,{onSubmitProduct:a.handleProductSubmit,categoryId:e._id},null,8,["onSubmitProduct","categoryId"])]),(0,i.Wm)(h,{tag:"ul",list:e.products,class:"rayon",handle:".grabWrapper","item-key":"_id","ghost-class":"ghost","drag-class":"drag",onEnd:t=>a.updateProductOrder(e)},{item:(0,i.w5)((({element:e,index:o})=>[((0,i.wg)(),(0,i.iD)("li",{class:"produit",key:e._id},[Dl,(0,i._)("div",Ul,[(0,i._)("img",{src:e.imageUrl,class:"imgproduit"},null,8,xl)]),(0,i._)("div",{class:"info",onClick:t=>a.openEditModal(e)},[(0,i._)("div",El,[(0,i._)("h2",Il,(0,u.zw)(e.nameProduct),1),(0,i._)("h3",null,(0,u.zw)(e.descriptionProduct),1)])],8,Ml),(0,i._)("div",{class:"prixProduit",onClick:t[0]||(t[0]=(0,l.iM)((()=>{}),["stop"]))},[(0,i.wy)((0,i._)("input",{type:"number",name:"prixMenu",step:"0.10",class:"field-long",placeholder:"prix",pattern:"^\\d+(\\.\\d{1,2})?$",max:"99.99","onUpdate:modelValue":t=>e.prixProduct=t,onChange:t=>a.expressPricing(e._id,e.prixProduct)},null,40,Tl),[[l.nr,e.prixProduct]])])]))])),_:2},1032,["list","onEnd"])])):(0,i.kq)("",!0)]))])),_:1},8,["list","onEnd"])])],64)}const Fl=(0,i._)("h2",null,"Créer un nouveau produit",-1),Al={class:"form-style-1"},Ol={key:0},Ll=(0,i._)("b",null,"Corriger les erreurs suivantes",-1),Wl=(0,i._)("label",{for:"nom"},"Nom du Produit",-1),ql=(0,i._)("label",{for:"description"},"description",-1),Nl=(0,i._)("label",{for:"prixProduit"},"Prix",-1),Hl={class:"switch"},Yl=(0,i._)("span",{class:"slider round"},null,-1),Rl=(0,i._)("button",{type:"submit",form:"addProductToCategory",class:"btn"},"Créer",-1);function Vl(e,t,o,n,r,a){const s=(0,i.up)("GenericModal");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("button",{class:"btn",onClick:t[0]||(t[0]=(...e)=>a.openModal&&a.openModal(...e))},"+"),(0,i.Wm)(s,{showModal:r.showModal,onClose:a.closeModal},{header:(0,i.w5)((()=>[Fl])),footer:(0,i.w5)((()=>[Rl,(0,i._)("button",{onClick:t[7]||(t[7]=(...e)=>a.closeModal&&a.closeModal(...e)),class:"btn delete"},"Annuler")])),default:(0,i.w5)((()=>[(0,i._)("form",{id:"addProductToCategory",enctype:"multipart/form-data",onSubmit:t[6]||(t[6]=(0,l.iM)((e=>a.addProductToCategory()),["prevent"]))},[(0,i._)("ul",Al,[r.errors.length?((0,i.wg)(),(0,i.iD)("p",Ol,[Ll,(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.errors,(e=>((0,i.wg)(),(0,i.iD)("li",null,(0,u.zw)(e),1)))),256))])])):(0,i.kq)("",!0),(0,i._)("li",null,[Wl,(0,i.wy)((0,i._)("input",{type:"text",name:"nom",class:"field-divided",placeholder:"Nom","onUpdate:modelValue":t[1]||(t[1]=e=>r.product.nameProduct=e),required:""},null,512),[[l.nr,r.product.nameProduct]])]),(0,i._)("li",null,[ql,(0,i.wy)((0,i._)("input",{type:"text",name:"description",class:"field-long",placeholder:"description","onUpdate:modelValue":t[2]||(t[2]=e=>r.product.descriptionProduct=e),required:""},null,512),[[l.nr,r.product.descriptionProduct]])]),(0,i._)("li",null,[Nl,(0,i.wy)((0,i._)("input",{type:"number",name:"prixProduit",step:"0.10",class:"field-long",placeholder:"en Euros",pattern:"^\\d+(\\.\\d{1,2})?$",max:"99.99","onUpdate:modelValue":t[3]||(t[3]=e=>r.product.prixProduct=e),required:""},null,512),[[l.nr,r.product.prixProduct]])]),(0,i._)("label",Hl,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=e=>this.product.available=e)},null,512),[[l.e8,this.product.available]]),Yl]),(0,i.Uk)(" "+(0,u.zw)(this.product.available?"disponible":"indisponible")+" ",1),(0,i._)("li",null,[(0,i._)("input",{type:"file",class:"btn fileSelector",onChange:t[5]||(t[5]=(...e)=>a.selectFile&&a.selectFile(...e)),required:""},null,32)])])],32)])),_:1},8,["showModal","onClose"])])}const zl={class:"modal-header"},$l={class:"modal-body"},Xl={class:"action-footer"};function Bl(e,t,o,n,r,a){return(0,i.wg)(),(0,i.j4)(l.uT,{name:"fade"},{default:(0,i.w5)((()=>[o.showModal?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"modal-overlay",onMousedown:t[2]||(t[2]=(...e)=>a.handleOutsideClick&&a.handleOutsideClick(...e)),onTouchstart:t[3]||(t[3]=(...e)=>a.handleOutsideClick&&a.handleOutsideClick(...e))},[(0,i._)("div",{class:"modal-content",ref:"modalContent",onClick:t[1]||(t[1]=(0,l.iM)((()=>{}),["stop"]))},[(0,i._)("div",zl,[(0,i.WI)(e.$slots,"header",{},void 0,!0),(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>a.closeModal&&a.closeModal(...e)),class:"btn"},"x")]),(0,i._)("div",$l,[(0,i.WI)(e.$slots,"default",{},void 0,!0)]),(0,i._)("div",Xl,[(0,i.WI)(e.$slots,"footer",{},void 0,!0)])],512)],32)):(0,i.kq)("",!0)])),_:3})}const jl={name:"ModalComponent",props:{showModal:{type:Boolean,default:!1},closeOnOutsideClick:{type:Boolean,default:!0}},mounted(){document.addEventListener("keydown",this.handleKeyDown)},beforeDestroy(){document.removeEventListener("keydown",this.handleKeyDown)},methods:{closeModal(){this.$emit("close")},handleOutsideClick(e){this.closeOnOutsideClick&&!this.$refs.modalContent.contains(e.target)&&this.closeModal()},handleKeyDown(e){"Escape"===e.key&&this.closeModal()}}},Zl=(0,a.Z)(jl,[["render",Bl],["__scopeId","data-v-65c1d8c5"]]),Gl=Zl,Kl={components:{GenericModal:Gl},props:{categoryId:{type:String,required:!1}},data(){return{showModal:!1,product:{nameProduct:"",descriptionProduct:"",prixProduct:null,prixMenu:null,image:null,category:"",available:!0},errors:[]}},methods:{openModal(){this.showModal=!0},closeModal(){this.showModal=!1},selectFile(e){this.product.image=e.target.files[0]},addProductToCategory(){const e=this.categoryId,t=new FormData;t.append("nameProduct",this.product.nameProduct),t.append("prixProduct",this.product.prixProduct),t.append("prixMenu",this.product.prixMenu),t.append("descriptionProduct",this.product.descriptionProduct),t.append("image",this.product.image),t.append("category",this.product.category),t.append("available",this.product.available),Mt.addProductToCategory(e,t).then((e=>{console.log(e.data),this.$router.push({name:"productIndex"}),this.$emit("submit-product",{product:e.data.product,categoryId:this.categoryId}),this.showModal=!1})).catch((e=>console.log(e)))}}},Jl=(0,a.Z)(Kl,[["render",Vl]]),Ql=Jl,ei=o.p+"img/icons.3f3befbd.svg",ti=e=>((0,i.dD)("data-v-416a366e"),e=e(),(0,i.Cn)(),e),oi=ei+"#upload",li=ti((()=>(0,i._)("h2",null,"Modification du Produit",-1))),ii={class:"banner-content"},ni={for:"imgProductEdit",class:"label-changeFile"},ri=ti((()=>(0,i._)("svg",{class:"icon upload-icon"},[(0,i._)("use",{href:oi})],-1))),ai={class:"picture"},si=["src"],di={class:"form-style-1"},ci={key:0},ui=ti((()=>(0,i._)("b",null,"Corriger les erreurs suivantes",-1))),pi=ti((()=>(0,i._)("label",{for:"nom"},"Nom du Produit",-1))),hi=ti((()=>(0,i._)("label",{for:"description'"},"Description",-1))),mi=ti((()=>(0,i._)("label",{for:"prix"},"Prix :",-1))),gi={class:"switch"},_i=ti((()=>(0,i._)("span",{class:"slider round"},null,-1))),yi=ti((()=>(0,i._)("button",{type:"submit",form:"editProduct",class:"btn"},"Modifier",-1)));function fi(e,t,o,n,r,a){const s=(0,i.up)("GenericModal");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(s,{showModal:r.showModal,onClose:a.closeModal},{header:(0,i.w5)((()=>[li])),footer:(0,i.w5)((()=>[yi,(0,i._)("button",{type:"button",class:"btn delete",onClick:t[6]||(t[6]=e=>a.goDeleteProduct())},"SUPPRIMER")])),default:(0,i.w5)((()=>[(0,i._)("form",{id:"editProduct",enctype:"multipart/form-data",onSubmit:t[5]||(t[5]=(0,l.iM)((e=>a.editProduct()),["prevent"]))},[(0,i._)("div",ii,[(0,i._)("label",ni,[ri,(0,i._)("input",{class:"changeFile",id:"imgProductEdit",type:"file",onChange:t[0]||(t[0]=e=>a.selectFile(e)),accept:"image/png, image/jpg, image/jpeg"},null,32)]),(0,i._)("div",ai,[this.product.imageUrl?((0,i.wg)(),(0,i.iD)("img",{key:0,class:(0,u.C_)(["oldImg",{newImg:this.product.newFile}]),src:this.product.imageUrl},null,10,si)):(0,i.kq)("",!0)])]),(0,i._)("ul",di,[r.errors.length?((0,i.wg)(),(0,i.iD)("p",ci,[ui,(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.errors,(e=>((0,i.wg)(),(0,i.iD)("li",null,(0,u.zw)(e),1)))),256))])])):(0,i.kq)("",!0),(0,i._)("li",null,[pi,(0,i.wy)((0,i._)("input",{type:"text",name:"nom",class:"field-divided",placeholder:"Nom","onUpdate:modelValue":t[1]||(t[1]=e=>r.product.nameProduct=e),required:""},null,512),[[l.nr,r.product.nameProduct]])]),(0,i._)("li",null,[hi,(0,i.wy)((0,i._)("input",{type:"text",name:"description",class:"field-long",placeholder:"description","onUpdate:modelValue":t[2]||(t[2]=e=>r.product.descriptionProduct=e),required:""},null,512),[[l.nr,r.product.descriptionProduct]])]),(0,i._)("li",null,[mi,(0,i.wy)((0,i._)("input",{type:"number",name:"prix",step:"0.10",class:"field-long",placeholder:"en Euros",pattern:"^\\d+(\\.\\d{1,2})?$",max:"99.99","onUpdate:modelValue":t[3]||(t[3]=e=>r.product.prixProduct=e),required:""},null,512),[[l.nr,r.product.prixProduct]])]),(0,i._)("li",null,[(0,i._)("label",gi,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=e=>this.product.available=e)},null,512),[[l.e8,this.product.available]]),_i]),(0,i.Uk)(" "+(0,u.zw)(r.product.available?"disponible":"indisponible"),1)])])],32)])),_:1},8,["showModal","onClose"])])}const vi={components:{GenericModal:Gl},props:{productEdit:{type:Object,required:!1,default:()=>({nameProduct:"",prixProduct:null,image:null,category:"",available:!0,descriptionProduct:""})}},data(){return{showModal:!1,product:{nameProduct:"",prixProduct:null,image:null,category:"",available:!0,descriptionProduct:""},errors:[]}},watch:{productEdit:{immediate:!0,deep:!0,handler(e){this.product={...e}}}},methods:{openModal(){this.showModal=!0},closeModal(){this.showModal=!1},selectFile(e){const t=e.target.files[0];this.product.image=e.target.files[0],t&&(this.product.imageUrl=URL.createObjectURL(t),this.product.newFile=t)},editProduct(){const e=new FormData;e.append("nameProduct",this.product.nameProduct),e.append("prixProduct",this.product.prixProduct),e.append("descriptionProduct",this.product.descriptionProduct),e.append("image",this.product.image),e.append("category",this.product.category),e.append("available",this.product.available),Mt.updateProduct(this.product._id,e).then((e=>{1==e.data.modif.acknowledged&&1==e.data.modif.matchedCount&&0==e.data.modif.modifiedCount?console.log("aucune modif"):(this.product.newFile=null,this.closeModal(),this.$emit("product-updated",this.product))})).catch((e=>console.log(e)))},goDeleteProduct(){Mt.deleteProduct(this.product._id).then((e=>{console.log(e.data),this.closeModal(),this.$emit("product-deleted",this.product)})).catch((e=>console.log(e)))}}},wi=(0,a.Z)(vi,[["render",fi],["__scopeId","data-v-416a366e"]]),bi=wi,Ci=(0,i._)("h2",null,"Créer une catégorie",-1),ki={class:"form-style-1"},Pi={key:0},Di=(0,i._)("b",null,"Corriger les erreurs suivantes",-1),Ui=(0,i._)("label",{for:"categoryName"},"Nom de la Catégorie",-1),xi=(0,i._)("label",{for:"Categorydescription"},"description",-1),Mi=(0,i._)("label",{for:"categoryImage"},"Image",-1),Ei=(0,i._)("button",{type:"submit",form:"createCategory",class:"btn"},"Créer",-1);function Ii(e,t,o,n,r,a){const s=(0,i.up)("GenericModal");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("button",{class:"btn",onClick:t[0]||(t[0]=(...e)=>a.openModal&&a.openModal(...e))},"Créer une Catégorie"),(0,i.Wm)(s,{showModal:r.showModal,onClose:a.closeModal},{header:(0,i.w5)((()=>[Ci])),footer:(0,i.w5)((()=>[Ei,(0,i._)("button",{onClick:t[5]||(t[5]=(...e)=>a.closeModal&&a.closeModal(...e)),class:"btn delete"},"Annuler")])),default:(0,i.w5)((()=>[(0,i._)("form",{id:"createCategory",enctype:"multipart/form-data",onSubmit:t[4]||(t[4]=(0,l.iM)(((...e)=>a.submitCategory&&a.submitCategory(...e)),["prevent"]))},[(0,i._)("ul",ki,[r.errors.length?((0,i.wg)(),(0,i.iD)("p",Pi,[Di,(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.errors,(e=>((0,i.wg)(),(0,i.iD)("li",null,(0,u.zw)(e),1)))),256))])])):(0,i.kq)("",!0),(0,i._)("li",null,[Ui,(0,i.wy)((0,i._)("input",{type:"text",id:"categoryName",class:"field-divided",placeholder:"Nom","onUpdate:modelValue":t[1]||(t[1]=e=>r.Category.titleCategory=e),required:""},null,512),[[l.nr,r.Category.titleCategory]])]),(0,i._)("li",null,[xi,(0,i.wy)((0,i._)("input",{type:"text",name:"Categorydescription",class:"field-long",placeholder:"description","onUpdate:modelValue":t[2]||(t[2]=e=>r.Category.descriptionCategory=e)},null,512),[[l.nr,r.Category.descriptionCategory]])]),(0,i._)("li",null,[Mi,(0,i._)("input",{name:"categoryImage",type:"file",class:"btn fileSelector",onChange:t[3]||(t[3]=(...e)=>a.selectFile&&a.selectFile(...e)),required:""},null,32)])])],32)])),_:1},8,["showModal","onClose"])])}const Ti={components:{GenericModal:Gl},data(){return{showModal:!1,Category:{titleCategory:"",descriptionCategory:"",imgCategory:""},allProducts:[],selectedProducts:[],showProductList:!1,errors:[]}},methods:{openModal(){this.showModal=!0},closeModal(){this.showModal=!1},selectFile(e){this.Category.imgCategory=e.target.files[0]},submitCategory(){const e=new FormData;e.append("titleCategory",this.Category.titleCategory),e.append("descriptionCategory",this.Category.descriptionCategory),e.append("imgCategory",this.Category.imgCategory),Mt.createCategory(e).then((e=>{console.log(e),this.$emit("category-added",e.data.createdCategory),this.showModal=!1})).catch((e=>console.log(e)))}}},Si=(0,a.Z)(Ti,[["render",Ii]]),Fi=Si,Ai=e=>((0,i.dD)("data-v-8d6b4aa4"),e=e(),(0,i.Cn)(),e),Oi=ei+"#upload",Li=Ai((()=>(0,i._)("h2",null,"Modification de la catégorie",-1))),Wi={class:"banner-content"},qi={for:"imgCategoryEdit",class:"label-changeFile"},Ni=Ai((()=>(0,i._)("svg",{class:"icon upload-icon"},[(0,i._)("use",{href:Oi})],-1))),Hi={class:"picture"},Yi=["src"],Ri={class:"form-style-1"},Vi={key:0},zi=Ai((()=>(0,i._)("b",null,"Corriger les erreurs suivantes",-1))),$i=Ai((()=>(0,i._)("label",{for:"nom"},"Nom de la Catégorie",-1))),Xi=Ai((()=>(0,i._)("label",{for:"Categorydescription'"},"Description",-1))),Bi=Ai((()=>(0,i._)("button",{type:"submit",form:"editCategory",class:"btn"},"Modifier",-1)));function ji(e,t,o,n,r,a){const s=(0,i.up)("GenericModal");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("button",{class:"btn",onClick:t[0]||(t[0]=(...e)=>a.openModal&&a.openModal(...e))},"Modifier"),(0,i.Wm)(s,{showModal:r.showModal,onClose:a.closeModal},{header:(0,i.w5)((()=>[Li])),footer:(0,i.w5)((()=>[Bi,(0,i._)("button",{type:"button",class:"btn delete",onClick:t[5]||(t[5]=e=>a.goDeleteCategory())},"SUPPRIMER")])),default:(0,i.w5)((()=>[(0,i._)("form",{id:"editCategory",enctype:"multipart/form-data",onSubmit:t[4]||(t[4]=(0,l.iM)((e=>a.editCategory()),["prevent"]))},[(0,i._)("div",Wi,[(0,i._)("label",qi,[Ni,(0,i._)("input",{class:"changeFile",id:"imgCategoryEdit",type:"file",onChange:t[1]||(t[1]=e=>a.selectFile(e)),accept:"image/png, image/jpg, image/jpeg"},null,32)]),(0,i._)("div",Hi,[this.Category.imgCategory?((0,i.wg)(),(0,i.iD)("img",{key:0,class:(0,u.C_)(["oldImg",{newImg:this.Category.newFile}]),src:this.Category.imgCategory},null,10,Yi)):(0,i.kq)("",!0)])]),(0,i._)("ul",Ri,[r.errors.length?((0,i.wg)(),(0,i.iD)("p",Vi,[zi,(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.errors,(e=>((0,i.wg)(),(0,i.iD)("li",null,(0,u.zw)(e),1)))),256))])])):(0,i.kq)("",!0),(0,i._)("li",null,[$i,(0,i.wy)((0,i._)("input",{type:"text",name:"nom",class:"field-divided",placeholder:"Nom","onUpdate:modelValue":t[2]||(t[2]=e=>r.Category.titleCategory=e),required:""},null,512),[[l.nr,r.Category.titleCategory]])]),(0,i._)("li",null,[Xi,(0,i.wy)((0,i._)("input",{type:"text",name:"Categorydescription",class:"field-long",placeholder:"description","onUpdate:modelValue":t[3]||(t[3]=e=>r.Category.descriptionCategory=e),required:""},null,512),[[l.nr,r.Category.descriptionCategory]])])])],32)])),_:1},8,["showModal","onClose"])])}const Zi={components:{GenericModal:Gl},props:{categoryEdit:{type:Object,required:!1,default:()=>({titleCategory:"",descriptionCategory:"",imgCategory:""})}},data(){return{showModal:!1,Category:{titleCategory:"",descriptionCategory:"",imgCategory:"",imageFile:null},allProducts:[],selectedProducts:[],showProductList:!1,errors:[]}},watch:{categoryEdit:{immediate:!0,deep:!0,handler(e){this.Category={...e}}}},methods:{openModal(){this.showModal=!0},closeModal(){this.showModal=!1},selectFile(e){const t=e.target.files[0];this.Category.imageFile=e.target.files[0],t&&(this.Category.imgCategory=URL.createObjectURL(t),this.Category.newFile=t)},editCategory(){const e=new FormData;e.append("titleCategory",this.Category.titleCategory),e.append("descriptionCategory",this.Category.descriptionCategory),e.append("imgCategory",this.Category.imageFile),Mt.editCategory(this.Category._id,e).then((e=>{1==e.data.modif.acknowledged&&1==e.data.modif.matchedCount&&0==e.data.modif.modifiedCount?console.log("aucune modif"):(this.Category.newFile=null,console.log(e.data),this.closeModal(),this.$emit("category-updated",this.Category))})).catch((e=>console.log(e)))},goDeleteCategory(){this.closeModal(),this.$emit("category-deleted",this.Category)}}},Gi=(0,a.Z)(Zi,[["render",ji],["__scopeId","data-v-8d6b4aa4"]]),Ki=Gi;var Ji=o(980),Qi=o.n(Ji);const en={name:"categoryIndex",components:{draggable:Qi(),ProductCreationModal:Ql,ProductEditModal:bi,CategoryCreationModal:Fi,CategoryEditModal:Ki},data(){return{drag:!1,categories:[],categoryName:"",productsList:[],selectedProduct:null,addedProducts:[],message:"",productToEdit:{},categoryToEdit:{},dragging:!1,showCategory:!0,showProducts:{}}},created(){this.getAllCategories()},methods:{getAllCategories(){Mt.getAllCategories().then((e=>{this.categories=e.data,this.categories.forEach((e=>{this.showProducts[e._id]=!1}))})).catch((e=>{console.log(e)}))},toggleProducts(e){this.showProducts[e]=!this.showProducts[e]},updateCategoryOrder(){this.categories.forEach(((e,t)=>{e.orderCategory=t}));const e=this.categories.map((e=>e._id));Mt.updateCategoryOrder(e).then((()=>{this.message="Catégorie mis à jour avec succès !"})).catch((e=>{this.message="Erreur lors de la mise à jour de la catégorie",console.error("Erreur:",e)}))},updateProductOrder(e){const t={titleCategory:e.titleCategory,productsOrder:e.products.map((e=>e._id))};Mt.updateProductOrder(e._id,t).then((()=>{this.message="Catégorie mis à jour avec succès !"})).catch((e=>{this.message="Erreur lors de la mise à jour de la catégorie",console.error("Erreur:",e)}))},deleteCategory(e){Mt.deleteCategory(e._id).then((t=>{console.log(t.data.message),this.categories=this.categories.filter((t=>t._id!==e._id))})).catch((e=>console.log(e)))},expressPricing(e,t){if(e&&t){const o=new FormData;o.append("prixProduct",t),Mt.updateProduct(e,o).then((e=>{1==e.data.modif.acknowledged&&1==e.data.modif.matchedCount&&0==e.data.modif.modifiedCount&&console.log("aucune modif")})).catch((e=>console.log(e)))}},addProduct(){const e=this.productsList.find((e=>e._id===this.selectedProduct));e&&!this.addedProducts.includes(e.nameProduct)&&this.addedProducts.push(e._id)},addNewCategory(e){this.categories.push(e),this.updateCategoryOrder()},submitCategory(){const e={titleCategory:this.categoryName,products:this.addedProducts};Mt.createCategory(e).then((e=>{this.message="Catégorie créée avec succès !",this.categoryName="",this.addedProducts=[],this.categories.push(e.data.createdCategory),updateCategoryOrder()})).catch((e=>{this.message="Erreur lors de la création de la catégorie.",console.error("Erreur:",e)}))},openEditModal(e){this.productToEdit=e,this.$refs.editModal.openModal()},handleProductSubmit(e){const t=this.categories.find((t=>t._id===e.categoryId));t&&t.products.push(e.product)},updateCategory(e){const t=this.categories.findIndex((t=>t._id===e._id));-1!==t&&(this.categories[t]=e)},updateProduct(e){const t=this.categories.findIndex((t=>t.products.some((t=>t._id===e._id))));if(-1!==t){const o=this.categories[t].products.findIndex((t=>t._id===e._id));-1!==o&&(this.categories[t].products.splice(o,1,e),this.productToEdit={})}},handleProductDeleted(e){const t=this.categories.findIndex((t=>t.products.some((t=>t._id===e._id))));if(-1!==t){const o=this.categories[t].products.findIndex((t=>t._id===e._id));-1!==o&&this.categories[t].products.splice(o,1)}}}},tn=(0,a.Z)(en,[["render",Sl],["__scopeId","data-v-50d5d21a"]]),on=tn,ln={name:"productIndex",components:{categoryIndex:on},data(){return{categoryName:"",categoryDescription:"",products:[]}},methods:{goEditProduct(e){this.$router.push({name:"productEdit",params:{id:e}})},goDeleteProduct(e,t){Mt.deleteProduct(e).then((e=>{console.log(e.data.message),this.products.splice(t,1)})).catch((e=>console.log(e)))}},mounted(){Mt.getAllProducts().then((e=>{this.products=e.data.Allproduct})).catch((e=>{console.log(e)}))}},nn=(0,a.Z)(ln,[["render",fl],["__scopeId","data-v-2168982f"]]),rn=nn,an=e=>((0,i.dD)("data-v-7e809fc1"),e=e(),(0,i.Cn)(),e),sn={class:"admin"},dn={class:"form-style-1"},cn={key:0},un=an((()=>(0,i._)("b",null,"Corriger les erreurs suivantes",-1))),pn=an((()=>(0,i._)("label",{for:"nom"},"Nom du Produit",-1))),hn=an((()=>(0,i._)("label",{for:"description"},"description",-1))),mn=an((()=>(0,i._)("label",{for:"prixProduit"},"Prix",-1))),gn=an((()=>(0,i._)("label",{for:"prixMenu"},"Prix en Menu:",-1))),_n=an((()=>(0,i._)("label",null,"CATEGORIE",-1))),yn=an((()=>(0,i._)("option",{value:"burger"},"BURGER",-1))),fn=an((()=>(0,i._)("option",{value:"tacos"},"TACOS",-1))),vn=an((()=>(0,i._)("option",{value:"sandwichs"},"SANDWICHS",-1))),wn=an((()=>(0,i._)("option",{value:"texmex"},"TEXMEX",-1))),bn=[yn,fn,vn,wn],Cn={class:"switch"},kn=an((()=>(0,i._)("span",{class:"slider round"},null,-1))),Pn=an((()=>(0,i._)("li",null,[(0,i._)("button",{type:"submit",class:"btn"},"CREER")],-1)));function Dn(e,t,o,n,r,a){return(0,i.wg)(),(0,i.iD)("div",sn,[(0,i._)("form",{enctype:"multipart/form-data",onSubmit:t[7]||(t[7]=(0,l.iM)((e=>a.addProduct()),["prevent"]))},[(0,i._)("ul",dn,[r.errors.length?((0,i.wg)(),(0,i.iD)("p",cn,[un,(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.errors,(e=>((0,i.wg)(),(0,i.iD)("li",null,(0,u.zw)(e),1)))),256))])])):(0,i.kq)("",!0),(0,i._)("li",null,[pn,(0,i.wy)((0,i._)("input",{type:"text",name:"nom",class:"field-divided",placeholder:"Nom","onUpdate:modelValue":t[0]||(t[0]=e=>r.product.nameProduct=e),required:""},null,512),[[l.nr,r.product.nameProduct]])]),(0,i._)("li",null,[hn,(0,i.wy)((0,i._)("input",{type:"text",name:"description",class:"field-long",placeholder:"description","onUpdate:modelValue":t[1]||(t[1]=e=>r.product.descriptionProduct=e),required:""},null,512),[[l.nr,r.product.descriptionProduct]])]),(0,i._)("li",null,[mn,(0,i.wy)((0,i._)("input",{type:"number",name:"prixProduit",step:"0.10",class:"field-long",placeholder:"en Euros",pattern:"^\\d+(\\.\\d{1,2})?$",max:"99.99","onUpdate:modelValue":t[2]||(t[2]=e=>r.product.prixProduct=e),required:""},null,512),[[l.nr,r.product.prixProduct]])]),(0,i._)("li",null,[gn,(0,i.wy)((0,i._)("input",{type:"number",name:"prixMenu",step:"0.10",class:"field-long",placeholder:"en Euros",pattern:"^\\d+(\\.\\d{1,2})?$",max:"99.99","onUpdate:modelValue":t[3]||(t[3]=e=>r.product.prixMenu=e)},null,512),[[l.nr,r.product.prixMenu]])]),(0,i._)("li",null,[_n,(0,i.wy)((0,i._)("select",{name:"field4",class:"field-select","onUpdate:modelValue":t[4]||(t[4]=e=>r.product.category=e),required:""},bn,512),[[l.bM,r.product.category]])]),(0,i._)("label",Cn,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=e=>this.product.available=e)},null,512),[[l.e8,this.product.available]]),kn]),(0,i.Uk)(" "+(0,u.zw)(this.product.available?"disponible":"indisponible")+" ",1),(0,i._)("li",null,[(0,i._)("input",{type:"file",onChange:t[6]||(t[6]=(...e)=>a.selectFile&&a.selectFile(...e)),required:""},null,32)]),Pn])],32)])}const Un={name:"productAdd",data(){return{product:{nameProduct:"",descriptionProduct:"",prixProduct:null,prixMenu:null,image:null,category:"",available:!0},errors:[]}},methods:{selectFile(e){this.product.image=e.target.files[0]},addProduct(){const e=new FormData;e.append("nameProduct",this.product.nameProduct),e.append("prixProduct",this.product.prixProduct),e.append("prixMenu",this.product.prixMenu),e.append("descriptionProduct",this.product.descriptionProduct),e.append("image",this.product.image),e.append("category",this.product.category),e.append("available",this.product.available),Mt.createProduct(e).then((e=>{console.log(e.data),this.$router.push({name:"productIndex"})})).catch((e=>console.log(e)))}}},xn=(0,a.Z)(Un,[["render",Dn],["__scopeId","data-v-7e809fc1"]]),Mn=xn,En=e=>((0,i.dD)("data-v-5221d967"),e=e(),(0,i.Cn)(),e),In={class:"admin"},Tn={class:"form-style-1"},Sn={key:0},Fn=En((()=>(0,i._)("b",null,"Corriger les erreurs suivantes",-1))),An=En((()=>(0,i._)("label",{for:"nom"},"Nom du Produit",-1))),On=En((()=>(0,i._)("label",{for:"description'"},"description",-1))),Ln=En((()=>(0,i._)("label",{for:"prix"},"Prix :",-1))),Wn={class:"switch"},qn=En((()=>(0,i._)("span",{class:"slider round"},null,-1))),Nn=En((()=>(0,i._)("li",null,[(0,i._)("button",{type:"submit",class:"btn"},"MODIFIER")],-1)));function Hn(e,t,o,n,r,a){return(0,i.wg)(),(0,i.iD)("div",In,[(0,i.Uk)((0,u.zw)(o.id)+" ",1),(0,i._)("form",{enctype:"multipart/form-data",onSubmit:t[5]||(t[5]=(0,l.iM)((e=>a.editProduct()),["prevent"]))},[(0,i._)("ul",Tn,[r.errors.length?((0,i.wg)(),(0,i.iD)("p",Sn,[Fn,(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.errors,(e=>((0,i.wg)(),(0,i.iD)("li",null,(0,u.zw)(e),1)))),256))])])):(0,i.kq)("",!0),(0,i._)("li",null,[An,(0,i.wy)((0,i._)("input",{type:"text",name:"nom",class:"field-divided",placeholder:"Nom","onUpdate:modelValue":t[0]||(t[0]=e=>r.product.nameProduct=e),required:""},null,512),[[l.nr,r.product.nameProduct]])]),(0,i._)("li",null,[On,(0,i.wy)((0,i._)("input",{type:"text",name:"description",class:"field-long",placeholder:"description","onUpdate:modelValue":t[1]||(t[1]=e=>r.product.descriptionProduct=e),required:""},null,512),[[l.nr,r.product.descriptionProduct]])]),(0,i._)("li",null,[Ln,(0,i.wy)((0,i._)("input",{type:"number",name:"prix",step:"0.10",class:"field-long",placeholder:"en Euros",pattern:"^\\d+(\\.\\d{1,2})?$",max:"99.99","onUpdate:modelValue":t[2]||(t[2]=e=>r.product.prixProduct=e),required:""},null,512),[[l.nr,r.product.prixProduct]])]),(0,i._)("li",null,[(0,i._)("label",Wn,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>this.product.available=e)},null,512),[[l.e8,this.product.available]]),qn]),(0,i.Uk)(" "+(0,u.zw)(this.product.available?"disponible":"indisponible"),1)]),(0,i._)("li",null,[(0,i._)("input",{type:"file",onChange:t[4]||(t[4]=(...e)=>a.selectFile&&a.selectFile(...e))},null,32)]),Nn])],32),(0,i.Uk)(" "+(0,u.zw)(this.product),1)])}const Yn={name:"productEdit",props:["id"],data(){return{product:{nameProduct:"",prixProduct:null,image:null,category:"",available:!0,descriptionProduct:""},errors:[]}},methods:{selectFile(e){this.product.image=e.target.files[0]},editProduct(){const e=new FormData;e.append("nameProduct",this.product.nameProduct),e.append("prixProduct",this.product.prixProduct),e.append("descriptionProduct",this.product.descriptionProduct),e.append("image",this.product.image),e.append("category",this.product.category),e.append("available",this.product.available),Mt.updateProduct(this.id,e).then((e=>{1==e.data.modif.acknowledged&&1==e.data.modif.matchedCount&&0==e.data.modif.modifiedCount?console.log("aucune modif"):this.$router.push({name:"productIndex"})})).catch((e=>console.log(e)))}},mounted(){Mt.getProduct(this.id).then((e=>{this.product=e.data.product})).catch((e=>console.log(e)))}},Rn=(0,a.Z)(Yn,[["render",Hn],["__scopeId","data-v-5221d967"]]),Vn=Rn,zn=e=>((0,i.dD)("data-v-21623272"),e=e(),(0,i.Cn)(),e),$n=ei+"#upload",Xn=zn((()=>(0,i._)("h1",{id:"homeManager-head"},"HOME MANAGER",-1))),Bn={id:"homeManager-content"},jn={id:"heroEdit",class:"module"},Zn={key:0},Gn=zn((()=>(0,i._)("h2",null,"Modifier l'image de couverture de la page d'accueil",-1))),Kn=["href"],Jn={class:"banner-content"},Qn={for:"changeHero",class:"label-changeFile"},er=zn((()=>(0,i._)("svg",{class:"icon upload-icon"},[(0,i._)("use",{href:$n})],-1))),tr={class:"picture"},or=["src"],lr=zn((()=>(0,i._)("button",{type:"submit",class:"btn"},"PUBLIER",-1))),ir={id:"colorTable",class:"module"},nr={key:0},rr=zn((()=>(0,i._)("h2",null,"Personnalisez votre application avec la table des couleurs",-1))),ar=zn((()=>(0,i._)("p",null,[(0,i.Uk)(" GENERAL: couleur du fond de l'ensemble de votre application. "),(0,i._)("br"),(0,i._)("br"),(0,i.Uk)(" PAGE HOME: couleur du fond de la page d'accueuil "),(0,i._)("br"),(0,i._)("br"),(0,i.Uk)(" MODULES: couleur de fond des modules produits ")],-1))),sr={class:"container-grid"},dr={class:"swatch"},cr={class:"info"},ur=zn((()=>(0,i._)("label",{for:"backgroundColor"},[(0,i._)("h1",null,"GENERAL")],-1))),pr={class:"hexaCode"},hr={class:"swatch"},mr={class:"info"},gr=zn((()=>(0,i._)("label",{for:"homeColor"},[(0,i._)("h1",null,"PAGE HOME")],-1))),_r={class:"hexaCode"},yr={class:"swatch"},fr={class:"info"},vr=zn((()=>(0,i._)("label",{for:"moduleColor"},[(0,i._)("h1",null,"MODULES")],-1))),wr={class:"hexaCode",style:{color:"var(--backgroundColor)"}},br={class:"swatch"},Cr={class:"info"},kr=zn((()=>(0,i._)("label",{for:"buttonColor"},[(0,i._)("h1",null,"BOUTTON")],-1))),Pr={class:"hexaCode"},Dr={class:"swatch"},Ur={class:"info"},xr=zn((()=>(0,i._)("label",{for:"titleColor"},[(0,i._)("h1",null,"TITRAGE")],-1))),Mr={class:"hexaCode"},Er={class:"swatch"},Ir={class:"info"},Tr=zn((()=>(0,i._)("label",{for:"textColor"},[(0,i._)("h1",null,"TEXTE")],-1))),Sr={class:"hexaCode"},Fr=zn((()=>(0,i._)("button",{class:"btn",type:"submit"},"Publier",-1))),Ar={id:"section-marketing",class:"module"},Or={key:0},Lr=zn((()=>(0,i._)("h2",null,"Modifier le contenu de la page d'accueil",-1))),Wr=zn((()=>(0,i._)("p",null,"Ceci est le contenu personnalisé du détail.",-1))),qr={class:"container-grid"},Nr=["onSubmit"],Hr={class:"banner-content"},Yr=["for"],Rr=zn((()=>(0,i._)("svg",{class:"icon upload-icon"},[(0,i._)("use",{href:$n})],-1))),Vr=["id","onChange"],zr={class:"picture"},$r=["src"],Xr={class:"textWrap"},Br={class:"cardText"},jr=["onClick"],Zr=["onUpdate:modelValue"],Gr={key:0,class:"btn-textarea"},Kr=["onClick"],Jr=["onUpdate:modelValue"],Qr={key:0,class:"btn-textarea"},ea=zn((()=>(0,i._)("button",{type:"submit",class:"btn green"},"PUBLIER",-1))),ta=["onClick"],oa={id:"section-config",class:"module"},la={key:0},ia=zn((()=>(0,i._)("h2",null,"Configurez votre application",-1))),na=zn((()=>(0,i._)("p",null,"Ceci est le contenu personnalisé du détail.",-1))),ra={class:"Horizontal-flex"};function aa(e,t,o,n,r,a){const s=(0,i.up)("moreDetail"),d=(0,i.up)("order-btn");return(0,i.wg)(),(0,i.iD)(i.HY,null,[Xn,(0,i._)("div",Bn,[(0,i._)("section",jn,[(0,i._)("h1",{onClick:t[0]||(t[0]=e=>a.collapseSection("showHero"))},"IMAGE HERO"),this.showHero?((0,i.wg)(),(0,i.iD)("div",Zn,[(0,i.Wm)(s,null,{summary:(0,i.w5)((()=>[Gn])),default:(0,i.w5)((()=>[(0,i._)("p",null,[(0,i.Uk)("Télécharger "),(0,i._)("a",{href:r.guideHeroPath,download:""},"le Guide",8,Kn)])])),_:1}),(0,i._)("form",{enctype:"multipart/form-data",onSubmit:t[2]||(t[2]=(0,l.iM)((e=>a.editHero()),["prevent"]))},[(0,i._)("div",Jn,[(0,i._)("label",Qn,[er,(0,i._)("input",{class:"changeFile",id:"changeHero",type:"file",onChange:t[1]||(t[1]=e=>a.selectFileHero(e)),accept:"image/png, image/jpg, image/jpeg"},null,32)]),(0,i._)("div",tr,[this.hero?((0,i.wg)(),(0,i.iD)("img",{key:0,class:(0,u.C_)(["oldImg",{newImg:this.hero.newFile}]),src:this.hero.imgHero},null,10,or)):(0,i.kq)("",!0)])]),lr],32)])):(0,i.kq)("",!0)]),(0,i._)("section",ir,[(0,i._)("h1",{onClick:t[3]||(t[3]=e=>a.collapseSection("showColorTable"))},"TABLE DES COULEURS"),this.showColorTable?((0,i.wg)(),(0,i.iD)("div",nr,[(0,i.Wm)(s,null,{summary:(0,i.w5)((()=>[rr])),default:(0,i.w5)((()=>[ar])),_:1}),(0,i._)("form",{onSubmit:t[17]||(t[17]=(0,l.iM)(((...e)=>a.saveStyle&&a.saveStyle(...e)),["prevent"]))},[(0,i._)("div",sr,[(0,i._)("div",dr,[(0,i.wy)((0,i._)("input",{type:"color",class:"colorSelector",id:"backgroundColor","onUpdate:modelValue":t[4]||(t[4]=t=>e.publicStyle.backgroundColor=t),onInput:t[5]||(t[5]=e=>a.updateColor("backgroundColor"))},null,544),[[l.nr,e.publicStyle.backgroundColor]]),(0,i._)("div",cr,[ur,(0,i._)("h2",pr,(0,u.zw)(e.publicStyle.backgroundColor),1)])]),(0,i._)("div",hr,[(0,i.wy)((0,i._)("input",{type:"color",class:"colorSelector",id:"homeColor","onUpdate:modelValue":t[6]||(t[6]=t=>e.publicStyle.homeColor=t),onInput:t[7]||(t[7]=e=>a.updateColor("homeColor"))},null,544),[[l.nr,e.publicStyle.homeColor]]),(0,i._)("div",mr,[gr,(0,i._)("h2",_r,(0,u.zw)(e.publicStyle.homeColor),1)])]),(0,i._)("div",yr,[(0,i.wy)((0,i._)("input",{type:"color",class:"colorSelector",id:"moduleColor","onUpdate:modelValue":t[8]||(t[8]=t=>e.publicStyle.moduleColor=t),onInput:t[9]||(t[9]=e=>a.updateColor("moduleColor"))},null,544),[[l.nr,e.publicStyle.moduleColor]]),(0,i._)("div",fr,[vr,(0,i._)("h2",wr,(0,u.zw)(e.publicStyle.moduleColor),1)])]),(0,i._)("div",br,[(0,i.wy)((0,i._)("input",{type:"color",class:"colorSelector",id:"buttonColor","onUpdate:modelValue":t[10]||(t[10]=t=>e.publicStyle.buttonColor=t),onInput:t[11]||(t[11]=e=>a.updateColor("buttonColor"))},null,544),[[l.nr,e.publicStyle.buttonColor]]),(0,i._)("div",Cr,[kr,(0,i._)("h2",Pr,(0,u.zw)(e.publicStyle.buttonColor),1)])]),(0,i._)("div",Dr,[(0,i.wy)((0,i._)("input",{type:"color",class:"colorSelector",id:"titleColor","onUpdate:modelValue":t[12]||(t[12]=t=>e.publicStyle.titleColor=t),onInput:t[13]||(t[13]=e=>a.updateColor("titleColor"))},null,544),[[l.nr,e.publicStyle.titleColor]]),(0,i._)("div",Ur,[xr,(0,i._)("h2",Mr,(0,u.zw)(e.publicStyle.titleColor),1)])]),(0,i._)("div",Er,[(0,i.wy)((0,i._)("input",{type:"color",class:"colorSelector",id:"textColor","onUpdate:modelValue":t[14]||(t[14]=t=>e.publicStyle.textColor=t),onInput:t[15]||(t[15]=e=>a.updateColor("textColor"))},null,544),[[l.nr,e.publicStyle.textColor]]),(0,i._)("div",Ir,[Tr,(0,i._)("h2",Sr,(0,u.zw)(e.publicStyle.textColor),1)])])]),Fr,(0,i._)("button",{class:"btn",type:"button",onClick:t[16]||(t[16]=e=>a.resetToInitialStyle())},"Annuler")],32)])):(0,i.kq)("",!0)]),(0,i._)("section",Ar,[(0,i._)("h1",{onClick:t[18]||(t[18]=e=>a.collapseSection("showFeedMarketing"))},"LE FEED MARKETING"),this.showFeedMarketing?((0,i.wg)(),(0,i.iD)("div",Or,[(0,i.Wm)(s,null,{summary:(0,i.w5)((()=>[Lr])),default:(0,i.w5)((()=>[Wr])),_:1}),(0,i._)("div",qr,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.home,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:"banner",key:e._id},[(0,i._)("form",{enctype:"multipart/form-data",onSubmit:(0,l.iM)((e=>a.editPost("marketing",t)),["prevent"])},[(0,i._)("div",Hr,[(0,i._)("label",{for:"changeImg"+t,class:"label-changeFile"},[Rr,(0,i._)("input",{class:"changeFile",id:"changeImg"+t,type:"file",onChange:e=>a.selectFile1(e,t),accept:"image/png, image/jpg, image/jpeg"},null,40,Vr)],8,Yr),(0,i._)("div",zr,[(0,i._)("img",{class:(0,u.C_)(["oldImg",{newImg:e.newFile}]),src:e.imgPost},null,10,$r)])]),(0,i._)("div",Xr,[(0,i._)("div",Br,[(0,i._)("div",{class:"edit-card",onClick:e=>r.activeIndex="title"+t},[(0,i.wy)((0,i._)("textarea",{class:(0,u.C_)([{cardFocus:r.activeIndex==="title"+t},"card-title"]),type:"text",rows:"1",maxlength:"20",pattern:"[A-Za-z0-9 ]+","onUpdate:modelValue":t=>e.titlePost=t},"\n                                                                                        ",10,Zr),[[l.nr,e.titlePost]]),r.activeIndex==="title"+t?((0,i.wg)(),(0,i.iD)("div",Gr)):(0,i.kq)("",!0)],8,jr),(0,i._)("div",{class:"edit-card",onClick:e=>r.activeIndex="description"+t},[(0,i.wy)((0,i._)("textarea",{class:(0,u.C_)([{cardFocus:r.activeIndex==="description"+t},"card-description"]),type:"text",rows:"2",maxlength:"90","onUpdate:modelValue":t=>e.descriptionPost=t},"\n                                                                                        ",10,Jr),[[l.nr,e.descriptionPost]]),r.activeIndex==="description"+t?((0,i.wg)(),(0,i.iD)("div",Qr)):(0,i.kq)("",!0)],8,Kr)]),ea,(0,i._)("button",{class:"btn",onClick:(0,l.iM)((e=>a.cancelEdit("marketing",t)),["stop","prevent"])},"annuler",8,ta)])],40,Nr)])))),128))])])):(0,i.kq)("",!0)]),(0,i._)("section",oa,[(0,i._)("h1",{onClick:t[19]||(t[19]=e=>a.collapseSection("showConfiguration"))},"CONFIGURATION"),r.showConfiguration?((0,i.wg)(),(0,i.iD)("div",la,[(0,i._)("div",null,[(0,i.Wm)(s,null,{summary:(0,i.w5)((()=>[ia])),default:(0,i.w5)((()=>[na])),_:1}),(0,i._)("div",ra,[(0,i.Wm)(d,{link:r.customLink},null,8,["link"]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[20]||(t[20]=e=>r.customLink=e),type:"text",placeholder:"Modifier le lien"},null,512),[[l.nr,r.customLink]])])])])):(0,i.kq)("",!0)])])],64)}const sa=e=>((0,i.dD)("data-v-6555cfc4"),e=e(),(0,i.Cn)(),e),da=sa((()=>(0,i._)("span",null,"...",-1))),ca={class:"text-detail"};function ua(e,t,o,l,n,r){return(0,i.wg)(),(0,i.iD)("details",null,[(0,i._)("summary",null,[(0,i.WI)(e.$slots,"summary",{},(()=>[(0,i.Uk)("Titre de la section par défaut")]),!0),da]),(0,i._)("div",ca,[(0,i.WI)(e.$slots,"default",{},void 0,!0)])])}const pa={name:"moreDetail",data(){return{}}},ha=(0,a.Z)(pa,[["render",ua],["__scopeId","data-v-6555cfc4"]]),ma=ha,ga={name:"homeEdit",components:{moreDetail:ma,orderBtn:Ye},data(){return{home:[],hero:{},originalData:[],originalHero:[],newFileHero:null,activeIndex:"",styleForm:{},showHero:!1,showColorTable:!1,showFeedMarketing:!1,showConfiguration:!1,customLink:"",guideHeroPath:"https://drive.google.com/file/d/1TGUnOcmkVLnrDsA6FFkg2FZinIqdwFiw/view"}},methods:{collapseSection(e){this[e]=!this[e]},...(0,j.nv)(["getPublicStyle","updatePublicStyle"]),updateColor(e){const t=this.publicStyle[e];/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(t)?document.documentElement.style.setProperty(`--${e}`,t):alert("Veuillez entrer une couleur hexadécimale valide.")},resetToInitialStyle(){this.getPublicStyle()},saveStyle(){this.styleForm={...this.publicStyle},this.updatePublicStyle(this.styleForm).then((()=>{console.log("mise à jour du style")})).catch((e=>{console.error("Erreur lors de la mise à jour du style:",e)}))},cancelEdit(e,t){"marketing"===e&&(this.home[t].titlePost=this.originalData[t].titlePost,this.home[t].descriptionPost=this.originalData[t].descriptionPost,this.home[t].imgPost=this.originalData[t].imgPost,this.home[t].newFile=null)},validModif(e){"description"===e&&(this.home.descriptionPost=this.description),"cardTitle"===e&&(this.home.titlePost=this.cardTitle),this.activeIndex=null},selectFile1(e,t){const o=e.target.files[0];if(o){if(!["image/jpeg","image/png"].includes(o.type))return void alert("Veuillez sélectionner une image au format JPEG ou PNG.");const e=5242880;if(o.size>e)return void alert("La taille de l'image est trop grande. Veuillez sélectionner une image plus petite.");this.home[t].imgPost=URL.createObjectURL(o),this.home[t].newFile=o}},createPost(e){const t=new FormData;t.append("titlePost",this.home[e].titlePost),t.append("descriptionPost",this.home[e].descriptionPost),this.home[e].newFile&&t.append("imgPost",this.home[e].newFile),Le.createPost(t).then((e=>{console.log(e)})).catch((e=>console.log(e)))},editPost(e,t){if("marketing"===e){const e=new FormData;e.append("titlePost",this.home[t].titlePost),e.append("descriptionPost",this.home[t].descriptionPost),this.home[t].newFile&&e.append("imgPost",this.home[t].newFile),this.home[t]._id?Le.postContent(this.home[t]._id,e).then((e=>{console.log(e),this.home[t].newFile=null,this.originalData[t].imgPost=this.home[t].imgPost})).catch((e=>console.log(e))):Le.createPost(e).then((e=>{console.log(e),this.home[t].newFile=null,this.originalData[t].imgPost=this.home[t].imgPost,console.log(e.data),this.home[t]._id=e.data.post._id})).catch((e=>console.log(e)))}},selectFileHero(e){const t=e.target.files[0];t&&(this.hero.imgHero=URL.createObjectURL(t),this.hero.newFile=t,console.log("newFile",this.hero.newFile))},editHero(){const e=new FormData;this.hero.newFile&&e.append("imgHero",this.hero.newFile),this.hero._id?(console.log(this.hero._id),Le.postHero(this.hero._id,e).then((e=>{this.hero.newFile=null,this.originalHero.imgHero=this.hero.imgHero})).catch((e=>console.log(e)))):Le.createHero(e).then((e=>{this.hero.newFile=null,this.originalHero.imgHero=this.hero.imgHero,this.hero._id=e.data.newHero._id})).catch((e=>console.log(e)))}},computed:{...(0,j.rn)(["publicStyle"])},mounted(){Le.getContent().then((e=>{const t={titlePost:"NOUVEAU POST",descriptionPost:"Modifier l'image, le titre et la description puis cliquez sur PUBLIER",imgPost:""};function o(e,t,o){while(e.length<o)e.push({...t});return e}const l=e.data.home||[],i=o(l,t,4);this.home=i,this.originalData=JSON.parse(JSON.stringify(i))})).catch((e=>{console.log(e)})),Le.getHero().then((e=>{const t={imgPost:""};e.data.hero&&e.data.hero.length>0?this.hero=e.data.hero[0]:this.hero=t})).catch((e=>console.log(e)))}},_a=(0,a.Z)(ga,[["render",aa],["__scopeId","data-v-21623272"]]),ya=_a,fa={class:"admin"},va={class:"module"},wa=(0,i._)("h1",null,"Authentification",-1),ba=(0,i._)("label",null,"Email:",-1),Ca=(0,i._)("label",null,"Mot de passe:",-1),ka=(0,i._)("button",{type:"submit",class:"btn"},"Se connecter",-1);function Pa(e,t,o,n,r,a){return(0,i.wg)(),(0,i.iD)("div",fa,[(0,i._)("div",va,[wa,(0,i._)("form",{onSubmit:t[2]||(t[2]=(0,l.iM)(((...e)=>a.login&&a.login(...e)),["prevent"]))},[ba,(0,i.wy)((0,i._)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>r.credentials.email=e),required:"",autocomplete:"username"},null,512),[[l.nr,r.credentials.email]]),Ca,(0,i.wy)((0,i._)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>r.credentials.password=e),required:"",autocomplete:"current-password"},null,512),[[l.nr,r.credentials.password]]),ka],32)])])}const Da={name:"login",data(){return{credentials:{email:"",password:""}}},methods:{login(){De.login(this.credentials).then((e=>{De.saveToken(e.data.token),this.$router.push("/admin/dashboard")})).catch((e=>console.log(e)))}},components:{PublicNav:F,BurgerNav:z}},Ua=(0,a.Z)(Da,[["render",Pa]]),xa=Ua,Ma={class:"admin"},Ea=(0,i._)("h2",null,"S'inscrire",-1),Ia=(0,i._)("label",null,"Username",-1),Ta=(0,i._)("label",null,"Email:",-1),Sa=(0,i._)("label",null,"Mot de passe:",-1),Fa=(0,i._)("button",{type:"submit"},"Se connecter",-1);function Aa(e,t,o,n,r,a){return(0,i.wg)(),(0,i.iD)("div",Ma,[Ea,(0,i._)("form",{onSubmit:t[3]||(t[3]=(0,l.iM)(((...e)=>a.signup&&a.signup(...e)),["prevent"]))},[Ia,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>r.credentials.name=e),required:"",autocomplete:"usernamed"},null,512),[[l.nr,r.credentials.name]]),Ta,(0,i.wy)((0,i._)("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=e=>r.credentials.email=e),required:""},null,512),[[l.nr,r.credentials.email]]),Sa,(0,i.wy)((0,i._)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>r.credentials.password=e),required:"",autocomplete:"current-password"},null,512),[[l.nr,r.credentials.password]]),Fa],32)])}const Oa={name:"signup",data(){return{credentials:{name:"",email:"",password:""}}},methods:{signup(){De.signup(this.credentials).then((e=>{De.saveToken(e.data.token),this.$router.push("/admin/dashboard")})).catch((e=>console.log(e)))}},components:{PublicNav:F}},La=(0,a.Z)(Oa,[["render",Aa]]),Wa=La;function qa(e){let t=sessionStorage.getItem("token");if(t)return!0;Ya.push("/login")}const Na=[{path:"/",name:"public",component:K,children:[{path:"/",name:"home",component:ze},{path:"/about",name:"about",component:ie},{path:"/menu",name:"menu",component:Tt}]},{path:"/admin",name:"admin",component:to,children:[{path:"dashboard",name:"Dashboard",component:ro,meta:{requireAuth:!0}},{path:"user/index",name:"userIndex",component:vo,meta:{requireAuth:!0},children:[{path:"user/add",name:"userAdd",component:Go,meta:{requireAuth:!0}},{path:"user/edit",name:"userEdit",component:Io,meta:{requireAuth:!0}}]},{path:"user/add",name:"userAdd",component:Go,meta:{requireAuth:!0}},{path:"user/edit",name:"userEdit",component:Io,meta:{requireAuth:!0}},{path:"client",name:"clientIndex",component:dl,meta:{requireAuth:!0}},{path:"content",name:"homeEdit",component:ya},{path:"user/edit/:id(\\d+)",name:"userEdit",component:Io,props:!0,meta:{requireAuth:!0}},{path:"products/index",name:"productIndex",component:rn},{path:"products/add",name:"productAdd",component:Mn},{path:"products/edit/:id(\\d+)",name:"productEdit",component:Vn,props:!0},{path:"/:patchMatch(.*)*",redirect:"/admin/dashboard"}]},{path:"/signup",name:"signup",component:Wa},{path:"/login",name:"login",component:xa},{path:"/:patchMatch(.*)*",redirect:"/"}],Ha=(0,c.p7)({history:(0,c.PO)("/startup/"),routes:Na});Ha.beforeEach(((e,t,o)=>{e.meta.requireAuth&&qa(),o()}));const Ya=Ha,Ra=(0,j.MT)({state:{publicStyle:{backgroundColor:"#FFFFFF",homeColor:"#FFFFFF",moduleColor:"#FFFFFF",buttonColor:"#FFFFFF",titleColor:"#FFFFFF",textColor:"#FFFFFF"}},getters:{publicStyle:e=>e.publicStyle},mutations:{SET_PUBLIC_STYLE(e,t){e.publicStyle=t,document.documentElement.style.setProperty("--backgroundColor",t.backgroundColor),document.documentElement.style.setProperty("--homeColor",t.homeColor),document.documentElement.style.setProperty("--moduleColor",t.moduleColor),document.documentElement.style.setProperty("--buttonColor",t.buttonColor),document.documentElement.style.setProperty("--titleColor",t.titleColor),document.documentElement.style.setProperty("--textColor",t.textColor)}},actions:{getPublicStyle({commit:e}){return Le.getPublicStyle().then((t=>{e("SET_PUBLIC_STYLE",t.data)})).catch((e=>{console.error("Erreur lors de la récupération du style",e)}))},updatePublicStyle({commit:e},t){return Le.updatePublicStyle(t).then((()=>{e("SET_PUBLIC_STYLE",t)})).catch((e=>{console.error("Erreur lors de la mise à jour du style.",e)}))},resetPublicStyle({commit:e}){return Le.getInitialPublicStyle().then((t=>{e("SET_PUBLIC_STYLE",t.data)})).catch((e=>{console.error("Erreur lors de la réinitialisation du style",e)}))},initializeData({dispatch:e}){return e("getPublicStyle")}},modules:{}});var Va=o(920);const za=(0,Va.ZP)({NODE_ENV:"production",VUE_APP_API_URL:"http://localhost:3000/",BASE_URL:"/startup/"}.VUE_APP_SOCKET_URL||"http://localhost:3000"),$a={connect:()=>{za.on("connect",(()=>{console.log("Connected to the server")}))},onThreadChange:e=>{za.on("threadChange",(t=>{e(t)}))},onCommentChange:e=>{za.on("commentChange",(t=>{e(t)}))},offCommentChange:e=>{za.off("commentChange",e)},emitEvent:(e,t)=>{za.emit(e,t)},disconnect:()=>{za.disconnect()}},Xa=$a,Ba=(0,l.ri)(d);Ba.provide("socket",Xa),Ba.use(Ra),Ba.use(Ya),Ba.mount("#app")}},t={};function o(l){var i=t[l];if(void 0!==i)return i.exports;var n=t[l]={exports:{}};return e[l].call(n.exports,n,n.exports,o),n.exports}o.m=e,(()=>{var e=[];o.O=(t,l,i,n)=>{if(!l){var r=1/0;for(c=0;c<e.length;c++){for(var[l,i,n]=e[c],a=!0,s=0;s<l.length;s++)(!1&n||r>=n)&&Object.keys(o.O).every((e=>o.O[e](l[s])))?l.splice(s--,1):(a=!1,n<r&&(r=n));if(a){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[l,i,n]}})(),(()=>{o.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return o.d(t,{a:t}),t}})(),(()=>{o.d=(e,t)=>{for(var l in t)o.o(t,l)&&!o.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}})(),(()=>{o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{o.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{o.p="/startup/"})(),(()=>{var e={143:0};o.O.j=t=>0===e[t];var t=(t,l)=>{var i,n,[r,a,s]=l,d=0;if(r.some((t=>0!==e[t]))){for(i in a)o.o(a,i)&&(o.m[i]=a[i]);if(s)var c=s(o)}for(t&&t(l);d<r.length;d++)n=r[d],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(c)},l=self["webpackChunksiteweb"]=self["webpackChunksiteweb"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var l=o.O(void 0,[998],(()=>o(886)));l=o.O(l)})();
//# sourceMappingURL=app.9b5ea638.js.map